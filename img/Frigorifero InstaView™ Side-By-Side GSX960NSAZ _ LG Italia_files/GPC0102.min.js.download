/**
 * @name InfoBox
 * @version 1.1.13 [March 19, 2014]
 * @author Gary Little (inspired by proof-of-concept code from Pamela Fox of Google)
 * @copyright Copyright 2010 Gary Little [gary at luxcentral.com]
 * @fileoverview InfoBox extends the Google Maps JavaScript API V3 <tt>OverlayView</tt> class.
 *  <p>
 *  An InfoBox behaves like a <tt>google.maps.InfoWindow</tt>, but it supports several
 *  additional properties for advanced styling. An InfoBox can also be used as a map label.
 *  <p>
 *  An InfoBox also fires the same events as a <tt>google.maps.InfoWindow</tt>.
 */
/*!
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
$(document).ready(function(){if(0==$(".GPC0102").length)return!1;var e,t,o,n,a,s,r,l,d,c,p,m,u,h,g,f,v,b,C,y=$(".GPC0102");function _(){var e;0<f.length?"undefined"==typeof ePrivacyCookies||ePrivacyCookies.get("LGCOM_ANALYSIS_OF_SITE")?(f.addClass("active"),e=g.attr("action"),ajax.call(e,g.serialize(),"json",function(e){if(e){var t="";if(0==e.data.length)0<f.find("ul").length&&f.find("ul").hide(),f.find(".no-items").addClass("active"),f.parent().find(".btn-wrap").removeClass("active");else{for(i=0;i<e.data.length;i++){var o=h(e.data[i],v);8<=i&&(o=o.replace("<li>",'<li class="mobile-hidden">')),t+=o}8<e.data.length?f.parent().find(".btn-wrap").addClass("active"):f.parent().find(".btn-wrap").removeClass("active"),""!=t?(0<f.find("ul").length?f.find("ul").show().html(xssfilter(t,"html")):f.prepend("<ul>"+xssfilter(t,"html")+"</ul>"),f.find(".no-items").removeClass("active")):(f.find(".no-items").addClass("active"),f.parent().find(".btn-wrap").removeClass("active"))}}else f.find(".no-items").addClass("active"),f.parent().find(".btn-wrap").removeClass("active")},"post",null)):(y.find(".find-online-cn .searchbox-wrap").remove(),ePrivacyCookies.view("load","",f),f.addClass("active")):"undefined"==typeof ePrivacyCookies||ePrivacyCookies.get("LGCOM_IMPROVEMENTS")?g.addClass("active"):(y.find(".find-online-cn .searchbox-wrap").remove(),ePrivacyCookies.view("load","",f),f.addClass("active"))}0<y.find(".box-3rd-party").length&&y.find(".box-3rd-party").each(function(){var n=$(this);if(0<n.find(".list-commerce-connector").length&&0<n.find(".list-commerce-connector .commerce-connector-js").length)if("undefined"==typeof ePrivacyCookies||ePrivacyCookies.get("LGCOM_ANALYSIS_OF_SITE")){n.data("template",$(this).find(".list-commerce-connector").html());var e,t=n.data("template"),o=$(t).data("src"),i=$(t).data(),a=document.createElement("script");for(e in a.src=o,i)"src"!=e&&a.setAttribute("data-"+e,i[e]);var s=!1;$(window).scroll(function(){var e=n.eq(0).offset().top,t=e+n.eq(0).height();isInScreen(e,t)&&(s||(s=!0,n.find(".list-commerce-connector").html($(a))))})}else ePrivacyCookies.view("load","",n);else 0<y.find(".lazyload-iframe").length?y.find(".lazyload-iframe").each(function(){var o,i=$(this);"undefined"==typeof ePrivacyCookies||ePrivacyCookies.get("LGCOM_ANALYSIS_OF_SITE")?(o=!1,$(window).scroll(function(){var e=i.eq(0).offset().top,t=e+i.eq(0).height();isInScreen(e,t)&&(o||(o=!0,i.attr("src",i.attr("data-src")).removeAttr("data-src")))})):ePrivacyCookies.view("load","",n)}):0<y.find(".lazyLoadedIframe").length&&y.find(".lazyLoadedIframe").each(function(){var o=$(this);"undefined"==typeof ePrivacyCookies||ePrivacyCookies.get("LGCOM_ANALYSIS_OF_SITE")?$(window).scroll(function(){var e=o.eq(0).offset().top,t=e+o.eq(0).height();isInScreen(e,t)&&(s||(s=!0,o.attr("src",o.attr("data-src")).removeAttr("data-src")))}):ePrivacyCookies.view("load","",n)})}),0<y.find(".directFrom").length&&(y.find(".directFrom .img-thumb").append('<img src="'+$(".GPC0009 img#base_detail_target").attr("data-src")+'" alt="'+$(".GPC0009 img#base_detail_target").attr("alt")+'"/>'),y.find(".directFrom .price-area").append($(".GPC0009 .price-area").html()),$(".GPC0009").length&&(u=$("#energyLabelFlag").val(),e=$("#productFicheFileName").val(),t=$("#productFicheOriginalName").val(),o=$("#energyLabel").val(),n=$("#energyLabelDocId").val(),a=$("#energyLabelFileName").val(),s=$("#productFicheDocId").val(),r=$("#energyLabelOriginalName").val(),l=$("#pdfDownloadFile").val(),d=$("#productFicheDownload").val(),c=$("#energyLabelImageAddr").val(),p=$("#energyLabelName").val(),m=y.find(".file-list"),"Y"==u&&((u="")!=e&&""!=t&&null!=e&&null!=t&&null!=s&&""!=s&&(u+="<a href='#' adobe-click='pdp-file-down-click' data-doc='"+s+"' data-file='"+e+"' data-original='"+t+"' data-category='' class='link-text' title='"+l+"'><span class='fiche type-product'>"+d+"</span></a>"),""!=o&&"N"!=o&&null!=o&&null!=a&&""!=a&&null!=r&&""!=r&&null!=p&&""!=p&&null!=c&&""!=c&&(u+="<a href='#' adobe-click='pdp-file-down-click' data-doc='"+n+"' data-file='"+a+"' data-original='"+r+"'  data-category='' class='link-text' title='"+l+"'><span class='label type-none'>",u+="<img src='"+c+"' alt='"+p+"'>",u+="</span></a>"),m.html(u))),y.find(".file-list a.link-text").on("click",function(e){e.preventDefault(),function(e){0<$("form#formDown").length&&$("form#formDown").remove();var t,o=e.closest("[data-file-download]"),i=o.data("flag").toUpperCase(),n=o.data("downtime")||null,a=o.data("opentime")||null;"Y"==i?0<(t=$("#htmlOpenError")).length?(t.modal(),t.find(".htmldowntime").text(n),t.find(".htmlopentime").text(a)):console.log("#htmlOpenError is required in HTML"):(n=e.data("doc"),t=e.data("file"),a=e.data("original"),e.data("category"),n='<input type="hidden" id="DOC_ID" name="DOC_ID" value="'+n+'" />',n+='<input type="hidden" id="ORIGINAL_NAME_b1_a1" name="ORIGINAL_NAME_b1_a1" value="'+a+'" />',n+='<input type="hidden" id="FILE_NAME" name="FILE_NAME" value="'+t+'" />',n+='<input type="hidden" id="TC" name="TC" value="DwnCmd" />',n+='<input type="hidden" id="GSRI_DOC" name="GSRI_DOC" value="GSRI" />',n=$("<form />").attr({id:"formDown",method:"get",action:o.data("action"),target:"_self"}).append(n),$("body").append(n),$("#formDown").submit())}($(this))})),0<y.find(".find-online").length&&(h=function(e,t,o,i){return o?(txt="ru"==e||"ua"==e?(n=decodeURI(getCookie("cid")),o.replace(/\*url1\*/g,getCookie("cid")?t.purchase_link+"&cid="+n:t.purchase_link).replace(/\*url2\*/g,getCookie("cid")?t.purchase_link+"&cid="+n:t.purchase_link).replace(/\*url\*/g,getCookie("cid")?t.purchase_link+"&cid="+n:t.purchase_link).replace(/\*img\*/g,t.logo).replace(/\*txt\*/g,t.name).replace(/\*idx\*/g,i)):("lg"==e?o.replace(/\*url1\*/g,t.deeplink_url).replace(/\*url2\*/g,t.deeplink_url).replace(/\*url\*/g,t.deeplink_url).replace(/\*img\*/g,t.logo_url).replace(/\*txt\*/g,t.name):"br"==$("html").data("countrycode")?o.replace(/\*url1\*/g,t.url).replace(/\*url2\*/g,t.url).replace(/\*url\*/g,t.url).replace(/\*img\*/g,t.retailerLogo).replace(/\*txt\*/g,t.retailer):o.replace(/\*url1\*/g,t.homepage_url||t.deeplink_url).replace(/\*url2\*/g,t.deeplink_url||t.homepage_url).replace(/\*url\*/g,t.deeplink_url||t.homepage_url).replace(/\*img\*/g,t.logo_url).replace(/\*txt\*/g,e?t.display_name:t.name)).replace(/\*idx\*/g,i),txt):"";var n},y.find(".find-online .list").each(function(){var a,e,s,r,t,n,o,l,d=$(this);d.hasClass("stock-list-ajax")?(d.addClass("active"),e=(a=$(this)).data("url")||a.data("url-pattern"),s=a.find("template").clone().html(),r=a.data("display-name"),t="json",n="retailers",0<=e.indexOf("lgwtb.lv")&&(t="jsonp",n="shops"),0<=e.indexOf("*BU*")?(e=e.replace("*BU*",getBU("online")),a.data("template",s),a.find("template").remove(),o=a.attr("data-mpn"),ajax.call(e,{region:"ua",mpn:o,callback:"success"},"jsonp",function(e){a.find(".list-box .items").hasClass("slick-initialized")&&a.find(".list-box .items").slick("unslick").empty();var t="";if(e&&200===e.iceleads_interface.status)if(0==e.iceleads_interface.retailers.retailer.length)a.find("ul").remove(),a.append("<ul>"+xssfilter(t,"html")+"</ul>"),a.find(".no-items").removeClass("active");else{for(var o=function(e){for(var t=0;t<e.length;t++){var o=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[o],e[o]=i}return e}(e.iceleads_interface.retailers.retailer),t="",i=0;i<o.length;i++)(0<o[i].stock_qty||"-99"==o[i].stock_qty)&&(t=h("ua",o[i],a.data("template"),i)+t);""!=t?(a.find("ul").remove(),a.append("<ul>"+xssfilter(t,"html")+"</ul>"),a.find(".no-items").removeClass("active")):(a.find("ul").remove(),a.find(".no-items").addClass("active"),$("#pdpOfflieWhere").length||($('.GPC0009 .button .where-to-buy[href="#pdp_where"]').remove(),$('.GPC0011 a[href="#pdp_where"]').parent().remove()))}else a.find("ul").remove(),a.find(".no-items").addClass("active"),$("#pdpOfflieWhere").length||($('.GPC0009 .button .where-to-buy[href="#pdp_where"]').remove(),$('.GPC0011 a[href="#pdp_where"]').parent().remove())},"get",null)):"br"==$("html").data("countrycode")?(l={token:null,api:"https://locatestore.intellibrand.ai",products:"product"},$.ajax({url:e,type:"GET",success:function(e){l.token=e.token},error:function(e,t,o){console.log("error!")}}).done(function(){var e=y.find("#modelName").val();$.ajax({headers:{Authorization:l.token},type:"GET",url:l.api+"/"+l.products+"/"+e,timeout:2e4,dataType:"json",success:function(e){var t=e.data.offers;if(e){a.data("template",s),a.find("template").remove();var o=t,n="";if(0<o.length){for(i=0;i<o.length;i++)"false"!=o[i].available&&(n+=h(r,o[i],a.data("template"),i));""!=n?(a.find("ul").remove(),a.append("<ul>"+xssfilter(n,"html")+"</ul>"),a.find(".no-items").removeClass("active")):(a.find("ul").remove(),a.find(".no-items").addClass("active"),$("#pdpOfflieWhere").length||($('.GPC0009 .button .where-to-buy[href="#pdp_where"]').remove(),$('.GPC0011 a[href="#pdp_where"]').parent().remove()))}else a.find("ul").remove(),a.find(".no-items").addClass("active"),$("#pdpOfflieWhere").length||($('.GPC0009 .button .where-to-buy[href="#pdp_where"]').remove(),$('.GPC0011 a[href="#pdp_where"]').parent().remove())}else a.find("ul").remove(),a.find(".no-items").addClass("active"),$("#pdpOfflieWhere").length||($('.GPC0009 .button .where-to-buy[href="#pdp_where"]').remove(),$('.GPC0011 a[href="#pdp_where"]').parent().remove())},error:function(e,t,o){console.log("error!")}})}).fail(function(e,t,o){console.log("error!")})):(a.data("template",s),a.find("template").remove(),ajax.call(e,{},t,function(e){var t="";if(e){var o="";if(0<(o="retailers"==n?e.products[0].retailers:e.shops).length){for(i=0;i<o.length;i++)e.products&&e.products[0].model_code&&a.attr("data-model",e.products[0].model_code),"false"!=o[i].instock&&(t+=h(r,o[i],a.data("template"),i));""!=t?(a.find("ul").remove(),a.append("<ul>"+xssfilter(t,"html")+"</ul>"),a.find(".no-items").removeClass("active")):(a.find("ul").remove(),a.find(".no-items").addClass("active"),$("#pdpOfflieWhere").length||($('.GPC0009 .button .where-to-buy[href="#pdp_where"]').remove(),$('.GPC0011 a[href="#pdp_where"]').parent().remove()))}else a.find("ul").remove(),a.find(".no-items").addClass("active"),$("#pdpOfflieWhere").length||($('.GPC0009 .button .where-to-buy[href="#pdp_where"]').remove(),$('.GPC0011 a[href="#pdp_where"]').parent().remove())}else a.find("ul").remove(),a.find(".no-items").addClass("active"),$("#pdpOfflieWhere").length||($('.GPC0009 .button .where-to-buy[href="#pdp_where"]').remove(),$('.GPC0011 a[href="#pdp_where"]').parent().remove())},"get",null))):d.addClass("active")}),y.find(".find-online").on("mouseenter",".list ul li",function(){$(this).closest("li").addClass("over")}).on("mouseleave",".list ul li",function(){$(this).closest("li").removeClass("over")}),y.find(".find-online").on("focus",".list ul li a",function(){$(this).closest("li").addClass("over")}).on("blur",".list ul li a",function(){$(this).closest("li").removeClass("over")}),y.find(".find-online .btn-wrap a.btn").on("click",function(e){e.preventDefault();for(var t=$(this).closest(".find-online").find(".list ul li.mobile-hidden").index(),o=0;o<8;o++)$(this).closest(".find-online").find(".list ul li").eq(o+t).removeClass("mobile-hidden");0==$(this).closest(".find-online").find(".list ul li.mobile-hidden").length&&$(this).closest(".btn-wrap").removeClass("active")})),0<y.find(".find-online-cn").length&&(h=function(e,t){return txt=t.replace(/\*siteName\*/g,e.siteName).replace(/\*imageAddr\*/g,e.imageAddr).replace(/\*link\*/g,e.link),txt},g=y.find(".find-online-cn form"),f=g.closest(".find-online-cn").find(".list"),v=f.find("template").clone().html(),f.find("template").remove(),_(),y.find("#onlineCity").on("change",function(){_()}),y.find(".find-online-cn").on("mouseenter",".list ul li",function(){$(this).closest("li").addClass("over")}).on("mouseleave",".list ul li",function(){$(this).closest("li").removeClass("over")}),y.find(".find-online-cn").on("focus",".list ul li a",function(){$(this).closest("li").addClass("over")}).on("blur",".list ul li a",function(){$(this).closest("li").removeClass("over")}),y.find(".find-online-cn .btn-wrap a.btn").on("click",function(e){e.preventDefault();for(var t=$(this).closest(".find-online-cn").find(".list ul li.mobile-hidden").index(),o=0;o<8;o++)$(this).closest(".find-online-cn").find(".list ul li").eq(o+t).removeClass("mobile-hidden");0==$(this).closest(".find-online-cn").find(".list ul li.mobile-hidden").length&&$(this).closest(".btn-wrap").removeClass("active")})),0<y.find(".find-locally").length&&(y.find(".find-locally").each(function(){$(this).find(".map-container").closest(".find-locally").addClass("active")}),C=!(window.initialize=function(){function o(e){e=e||{},google.maps.OverlayView.apply(this,arguments),this.content_=e.content||"",this.disableAutoPan_=e.disableAutoPan||!1,this.maxWidth_=e.maxWidth||0,this.pixelOffset_=e.pixelOffset||new google.maps.Size(0,0),this.position_=e.position||new google.maps.LatLng(0,0),this.zIndex_=e.zIndex||null,this.boxClass_=e.boxClass||"infoBox",this.boxStyle_=e.boxStyle||{},this.closeBoxMargin_=e.closeBoxMargin||"2px",this.closeBoxURL_=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===e.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=e.infoBoxClearance||new google.maps.Size(1,1),void 0===e.visible&&(void 0===e.isHidden?e.visible=!0:e.visible=!e.isHidden),this.isHidden_=!e.visible,this.alignBottom_=e.alignBottom||!1,this.pane_=e.pane||"floatPane",this.enableEventPropagation_=e.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}(o.prototype=new google.maps.OverlayView).createInfoBoxDiv_=function(){function t(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}var e,o,i,n=this;if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),void 0===this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(i=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-i.left-i.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],o=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],e=0;e<o.length;e++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,o[e],t));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(e){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",function(e){e.returnValue=!1,e.preventDefault&&e.preventDefault(),n.enableEventPropagation_||t(e)}),google.maps.event.trigger(this,"domready")}},o.prototype.getCloseBoxImg_=function(){var e="";return""!==this.closeBoxURL_&&(e="<a href='#none' class='window-close' id='infoWindowClose'><div class='sr-only'>close</div></a>"),e},o.prototype.addClickHandler_=function(){var e;""!==this.closeBoxURL_?(e=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(e,"click",this.getCloseClickHandler_())):this.closeListener_=null},o.prototype.getCloseClickHandler_=function(){var t=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(t,"closeclick"),t.close()}},o.prototype.panBox_=function(e){var t,o,i,n,a,s,r,l,d,c=0,p=0;e||(d=this.getMap())instanceof google.maps.Map&&(d.getBounds().contains(this.position_)||d.setCenter(this.position_),d.getBounds(),t=(l=d.getDiv()).offsetWidth,o=l.offsetHeight,i=this.pixelOffset_.width,n=this.pixelOffset_.height,a=this.div_.offsetWidth,s=this.div_.offsetHeight,r=this.infoBoxClearance_.width,e=this.infoBoxClearance_.height,(l=this.getProjection().fromLatLngToContainerPixel(this.position_)).x<-i+r?c=l.x+i-r:l.x+a+i+r>t&&(c=l.x+a+i+r-t),this.alignBottom_?l.y<-n+e+s?p=l.y+n-e-s:l.y+n+e>o&&(p=l.y+n+e-o):l.y<-n+e?p=l.y+n-e:l.y+s+n+e>o&&(p=l.y+s+n+e-o),0===c&&0===p||(d.getCenter(),d.panBy(c,p)))},o.prototype.setBoxStyle_=function(){var e,t;if(this.div_){for(e in this.div_.className=this.boxClass_,this.div_.style.cssText="",t=this.boxStyle_)t.hasOwnProperty(e)&&(this.div_.style[e]=t[e]);this.div_.style.WebkitTransform="translateZ(0)",void 0!==this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*this.div_.style.opacity+')"',this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},o.prototype.getBoxWidths_=function(){var e,t={top:0,bottom:0,left:0,right:0},o=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(e=o.ownerDocument.defaultView.getComputedStyle(o,""))&&(t.top=parseInt(e.borderTopWidth,10)||0,t.bottom=parseInt(e.borderBottomWidth,10)||0,t.left=parseInt(e.borderLeftWidth,10)||0,t.right=parseInt(e.borderRightWidth,10)||0):document.documentElement.currentStyle&&o.currentStyle&&(t.top=parseInt(o.currentStyle.borderTopWidth,10)||0,t.bottom=parseInt(o.currentStyle.borderBottomWidth,10)||0,t.left=parseInt(o.currentStyle.borderLeftWidth,10)||0,t.right=parseInt(o.currentStyle.borderRightWidth,10)||0),t},o.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},o.prototype.draw=function(){this.createInfoBoxDiv_();var e=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=e.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(e.y+this.pixelOffset_.height)+"px":this.div_.style.top=e.y+this.pixelOffset_.height+"px",this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"},o.prototype.setOptions=function(e){void 0!==e.boxClass&&(this.boxClass_=e.boxClass,this.setBoxStyle_()),void 0!==e.boxStyle&&(this.boxStyle_=e.boxStyle,this.setBoxStyle_()),void 0!==e.content&&this.setContent(e.content),void 0!==e.disableAutoPan&&(this.disableAutoPan_=e.disableAutoPan),void 0!==e.maxWidth&&(this.maxWidth_=e.maxWidth),void 0!==e.pixelOffset&&(this.pixelOffset_=e.pixelOffset),void 0!==e.alignBottom&&(this.alignBottom_=e.alignBottom),void 0!==e.position&&this.setPosition(e.position),void 0!==e.zIndex&&this.setZIndex(e.zIndex),void 0!==e.closeBoxMargin&&(this.closeBoxMargin_=e.closeBoxMargin),void 0!==e.closeBoxURL&&(this.closeBoxURL_=e.closeBoxURL),void 0!==e.infoBoxClearance&&(this.infoBoxClearance_=e.infoBoxClearance),void 0!==e.isHidden&&(this.isHidden_=e.isHidden),void 0!==e.visible&&(this.isHidden_=!e.visible),void 0!==e.enableEventPropagation&&(this.enableEventPropagation_=e.enableEventPropagation),this.div_&&this.draw()},o.prototype.setContent=function(e){this.content_=e,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),void 0===e.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+e:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(e)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px",void 0===e.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+e:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(e))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},o.prototype.setPosition=function(e){this.position_=e,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},o.prototype.setZIndex=function(e){this.zIndex_=e,this.div_&&(this.div_.style.zIndex=e),google.maps.event.trigger(this,"zindex_changed")},o.prototype.setVisible=function(e){this.isHidden_=!e,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},o.prototype.getContent=function(){return this.content_},o.prototype.getPosition=function(){return this.position_},o.prototype.getZIndex=function(){return this.zIndex_},o.prototype.getVisible=function(){var e=void 0!==this.getMap()&&null!==this.getMap()&&!this.isHidden_;return e},o.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},o.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},o.prototype.open=function(e,t){var o=this;t&&(this.position_=t.getPosition(),this.moveListener_=google.maps.event.addListener(t,"position_changed",function(){o.setPosition(this.getPosition())})),this.setMap(e),this.div_&&this.panBox_()},o.prototype.close=function(){var e;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(e=0;e<this.eventListeners_.length;e++)google.maps.event.removeListener(this.eventListeners_[e]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)};var n=!0;({options:{country:null,zoomLevel:5,zoomLevelMin:2,zoomLevelMax:24,viewport:null,queryZoomLevel:10,queryUrl:$("#storeSearchForm").attr("action"),queryType:"json",unitMetric:!0,useDirection:!1,centerLatitude:null,centerLongitude:null,defaultLatitude:$(".find-locally").data("default-latitude"),defaultLongitude:$(".find-locally").data("default-longitude"),autoSubmit:$(".find-locally").data("default-submit"),defaultZoom:10,useController:!1,useBrand:!1,debug:!1},_init:function(){var o=this;o.$localStore=$(".find-locally"),o.$searchForm=o.$localStore.find(".searchbox form"),o.$storeSection=o.$localStore.find(".information-on-map"),o.$toggleBtn=o.$localStore.find(".btn-collapse"),o.$resultBox=o.$localStore.find(".result-box"),o.$directionBox=o.$localStore.find(".direction-box"),o.$storeList=o.$localStore.find("#storeResult .result-list"),o.$brandList=o.$localStore.find("#brandResult .result-list"),o.$searchInput=o.$localStore.find("#mapSearch"),o.$storeSearchForm=o.$localStore.find("#storeSearchForm"),o.$resultLocation=o.$localStore.find(".search-location"),o.$directionsForm=o.$localStore.find("#directionForm"),o.$storeMapArea=o.$localStore.find("#storeMap"),o.$countryCombo=o.$localStore.find("#countryList"),o.$stepCity=o.$localStore.find("select[name=stepCity]"),o.$cityCombo=o.$localStore.find("select[name=city]"),o.$stateCombo=o.$localStore.find("select[name=state]"),o.$routeList=o.$localStore.find("#directionRoute"),o.locaitonKey=document.getElementById("startInput"),o.hasSearchInput=o.$localStore.find(".search-results .search-area.type-store").hasClass("active"),o.hasSearchSubmit=0<o.$localStore.find(".searchbox-wrap .select-box button[type=submit]").length,o.$defaultMsg=o.$resultBox.find(".default-msg"),o.$noItems=o.$resultBox.find(".no-items"),o.$btnArea=o.$resultBox.find(".btn-area"),o.$locationBtn=o.$localStore.find("button.location"),o.templateList=o.$storeList.find("template.list").clone().html(),o.templateMap=o.$storeList.find("template.map").clone().html(),o.options.country=o.$localStore.data("country")?o.$localStore.data("country"):null,o.options.useBrand=0<o.$resultBox.find(".tabs-type-liner").length,o.options.useBrand||o.$localStore.addClass("no-tab"),o.geoResult={},o.markers=[],o.stores=[],o.activeItem,o.searchHandle=!1,o.distance=o.options.distance,o.afterControl=!1,o.openDirection=!1,o.timing={queryTimeout:null},o.markerIcon={size:new google.maps.Size(30,43),anchor:new google.maps.Point(19,54)},(null!=o.options.country||o.options.defaultLatitude&&o.options.defaultLongitude)&&o.mapSetting(),$(".GPC0102").on("click",".get-direction",function(e){e.preventDefault(),o.openDirection=!0,o.$resultBox.removeClass("active"),o.$directionBox.addClass("active"),o.$localStore.find(".search-results .search-area.type-store").removeClass("active"),o.$localStore.find(".search-results .search-area.type-direction").addClass("active"),$(this).closest(".list-box").find(".view-detail-map").trigger("click");e=$(this).closest(".btns").siblings(".address").text();$(this).closest(".find-locally").find(".search-area.type-direction .to div.input").text(e),o.setDirection(o.activeItem)}),$(".GPC0102").on("click",".search-area.type-direction .close a",function(e){e.preventDefault();e=o.activeItem;o.$resultBox.addClass("active"),o.$directionBox.removeClass("active"),o.hasSearchInput&&o.$localStore.find(".search-results .search-area.type-store").addClass("active"),o.$localStore.find(".search-results .search-area.type-direction").removeClass("active"),o.directionsDisplay.setMap(null),o.directionsDisplay.setPanel(null);for(var t=0;t<o.markers.length;t++)o.markers[t].getVisible()||o.markers[t].setVisible(!0);o.$resultBox.find(".tabs-cont.active div.list-box[data-item="+e+"] .view-detail-map").trigger("click"),o.openDirection=!1,$("#startInput").val("")}),o.$locationBtn.on("click",function(e){e.preventDefault(),o.getMyLocation()}),o.$toggleBtn.on("click",function(e){e.preventDefault();e=o.$storeSection;e.hasClass("active")?(e.removeClass("active"),o.$localStore.find(".search-results").removeClass("active")):(e.addClass("active"),o.$localStore.find(".search-results").addClass("active"))}),o.$storeSearchForm.on("submit",$.proxy(o.searchAddress,o)),o.$directionsForm.on("submit",$.proxy(o.setDirectionPanel,o)),o.$countryCombo.on("change",function(e){o.options.country=""!=$(this).val()?$(this).val():null,"cb"==o.options.country&&(o.options.country="pa"),o.hasSearchSubmit||(o.options.autoSubmit||o.mapSetting(),o.hasSearchInput?("jo"==o.options.country?$(window).width()<768?o.map.setZoom(6):o.map.setZoom(7):"iq"==o.options.country?$(window).width()<768?o.map.setZoom(5):o.map.setZoom(6):"lb"==o.options.country||"ps"==o.options.country?$(window).width()<768?o.map.setZoom(7):o.map.setZoom(8):"sy"==o.options.country?($(window).width(),o.map.setZoom(6)):"cr"==o.options.country&&($(window).width()<768?o.map.setZoom(6):o.map.setZoom(7)),o.$searchInput.val("")):o.$storeSearchForm.submit())}),o.$stepCity.on("change",function(e){o.keyword.value="",o.hasSearchSubmit||o.$storeSearchForm.submit()});var t=o.$stateCombo.data("param");t&&o.$stateCombo.find("option[value]").each(function(){var e=$(this).val();$(this).attr("data-param",t+"&state="+e)}),o.$stateCombo.drawAjaxOptions({setTarget:document.getElementById("comboCity"),dynamicParam:!0}),o.$localStore.find(".searchbox form .submit-box button.btn.btn-primary").on("click",function(e){e.preventDefault(),o.$resultBox.addClass("active"),o.$directionBox.removeClass("active"),o.$localStore.find(".search-results").addClass("active"),o.hasSearchInput&&o.$localStore.find(".search-results .search-area.type-store").addClass("active"),o.$localStore.find(".search-results .search-area.type-direction").removeClass("active"),0<o.$countryCombo.length&&null!=o.options.country&&o.mapSetting(),o.$storeSearchForm.submit()}),o.$storeSection.on("click",".list-box .category-area .category a",function(e){e.preventDefault(),e.stopPropagation(),o.$storeList.hasClass("mCustomScrollbar")&&o.$storeList.mCustomScrollbar("destroy"),o.$brandList.hasClass("mCustomScrollbar")&&o.$brandList.mCustomScrollbar("destroy");e=$(this).closest(".category-area"),e=e.hasClass("active")?(e.removeClass("active"),$(this).attr("aria-expanded",!1),$(this).data("show-msg")):(e.addClass("active"),$(this).attr("aria-expanded",!0),$(this).data("hide-msg"));if($(this).text(e),$(this).closest(".list").hasClass("slick-initialized")){var t=0;for(i=0;i<$(this).closest(".slick-current").find(".list-box").length;i++)t+=parseInt($(this).closest(".slick-current").find(".list-box").eq(i).outerHeight()),console.log(parseInt($(this).closest(".slick-current").find(".list-box").eq(i).outerHeight()),t);$(this).closest(".slick-list").css("height",t)}return!1})},getMyLocation:function(){var o=this;if("disabled"!=$(this).siblings("input[type=text]").attr("disabled")){if(o.geocoder=new google.maps.Geocoder,null==o.options.country)return o.$storeList.removeClass("active"),o.$brandList.removeClass("active"),o.$defaultMsg.addClass("active"),o.$noItems.removeClass("active"),void o.$btnArea.removeClass("active");navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){e=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);o.geocoder.geocode({location:e,region:o.options.country},$.proxy(function(e,t){t==google.maps.GeocoderStatus.OK&&(t=e[0].geometry,e=e[0].formatted_address,t=t.viewport,$(this).closest("form"),(o.openDirection?$(o.locaitonKey):o.$searchInput).val(e),o.map.fitBounds(t),o.center=o.map.getCenter(),(o.openDirection?o.$directionsForm:o.$storeSearchForm).submit())},o))},e,{enableHighAccuracy:!0,timeout:1e3}):e()}function e(e){e&&console.log(e.code,e.message),0<$("#geoLocationError").length&&$("#geoLocationError").modal()}},mapSetting:function(){var e,t=this;t.mapDiv=document.getElementById("storeMap"),t.keyword=document.getElementById("mapSearch"),t.mapOptions={zoom:n?t.options.zoomLevel:t.map.getZoom(),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,mapTypeControlOptions:{position:ISRTL?google.maps.ControlPosition.RIGHT_TOP:google.maps.ControlPosition.LEFT_TOP},panControl:!1,panControlOptions:{position:ISRTL?google.maps.ControlPosition.LEFT_TOP:google.maps.ControlPosition.RIGHT_TOP},zoomControl:!0,zoomControlOptions:{position:ISRTL?google.maps.ControlPosition.LEFT_BOTTOM:google.maps.ControlPosition.RIGHT_BOTTOM},scaleControl:!1,scaleControlOptions:{position:ISRTL?google.maps.ControlPosition.LEFT_TOP:google.maps.ControlPosition.RIGHT_TOP},streetViewControl:!0,streetViewControlOptions:{position:ISRTL?google.maps.ControlPosition.LEFT_BOTTOM:google.maps.ControlPosition.RIGHT_BOTTOM},fullscreenControl:!0,fullscreenControlOptions:{position:ISRTL?google.maps.ControlPosition.LEFT_TOP:google.maps.ControlPosition.RIGHT_TOP},minZoom:t.options.zoomLevelMin,maxZoom:t.options.zoomLevelMax},t.infoOptions={disableAutoPan:!0,alignBottom:!0,pixelOffset:new google.maps.Size(-162,-54),zIndex:99,boxStyle:{width:$(window).width()<768?"300px":"360px"},infoBoxClearance:new google.maps.Size(1,1),enableEventPropagation:!0,boxClass:$(window).width()<768?"info-window small":"info-window"},t.map=new google.maps.Map(t.mapDiv,t.mapOptions),t.infoBox=new o(t.infoOptions),t.directionService=new google.maps.DirectionsService,t.directionsDisplay=new google.maps.DirectionsRenderer,t.mapControl(),t.center=t.map.getCenter(),n?(t.options.defaultLatitude&&t.options.defaultLongitude?(e=new google.maps.LatLng(t.options.defaultLatitude,t.options.defaultLongitude),t.setCountry(e,"latlng")):(n=!1,t.setCountry(t.options.country,"country")),0<parseInt(t.options.defaultZoom)&&t.map.setZoom(parseInt(t.options.defaultZoom))):t.setCountry(t.options.country,"country"),t.autoZipcode(t.keyword)},autoZipcode:function(e){$(".pac-container").remove();var t=this;if(!t.options.country)return!1;"cb"==t.options.country&&(t.options.country="pa"),t.autoCompleteOption={componentRestrictions:{country:t.options.country}},t.autoComplete=new google.maps.places.Autocomplete(e,t.autoCompleteOption),google.maps.event.addListener(t.autoComplete,"place_changed",$.proxy(function(e){t.autoComplete.getPlace();t.openDirection||setTimeout(function(){t.$storeSearchForm.submit()},100)},t))},mapControl:function(){var t=this;google.maps.event.addListener(t.map,"dragend",$.proxy(function(e){t.center=t.map.getCenter(),t.openDirection||t.afterControl&&(t.getStore(),t.setRestrictionByGeocode(t.center)),google.maps.event.trigger(t.map,"resize")},t))},queryData:function(){var r=this;r.map.getZoom()<r.options.queryZoomLevel&&r.map.setZoom(r.options.queryZoomLevel),"cr"==r.results[0].short_name.toLowerCase()&&r.map.setZoom(7),DEBUG&&console.log("GETZOOM",r.map.getZoom(),r.options.queryZoomLevel),r.dataque=r.$storeSearchForm.serialize()+"&"+$.param({lat:r.map.getCenter().lat(),lng:r.map.getCenter().lng(),zipCode:r.options.country,zoomLevel:r.map.getZoom()?r.map.getZoom():10}),DEBUG&&console.log(r.dataque),0<r.$countryCombo.length&&(r.dataque=r.dataque+"&"+$.param({country:r.$countryCombo.val()})),0<r.$stepCity.length&&(r.dataque=r.dataque+"&"+$.param({stepCity:r.$stepCity.val()})),0<r.$stateCombo.length&&(r.dataque=r.dataque+"&"+$.param({state:r.$stateCombo.val()})),0<r.$cityCombo.length&&(r.dataque=r.dataque+"&"+$.param({city:r.$cityCombo.val()})),r.center=r.map.getCenter(),r.clearMarker(),$(".GPC0102 .map-container").trigger("ajaxLoadBefore"),$.ajax({type:"post",url:r.options.queryUrl,data:xssfilter(r.dataque),dataType:r.options.queryType,error:function(e){r.setErrorList()},success:function(e){if(r.map.process=!0,r.markers=[],r.stores=[],e){var i=e instanceof Array?e:e.data;if(i.length){var n=new google.maps.LatLngBounds,a=0;if(r.$storeList.addClass("active"),r.$storeList.siblings(".btn-area").removeClass("active"),r.$storeList.siblings(".default-msg").removeClass("active"),r.$storeList.siblings(".no-items").removeClass("active"),r.$brandList.addClass("active"),r.$brandList.siblings(".btn-area").removeClass("active"),r.$brandList.siblings(".default-msg").removeClass("active"),r.$brandList.siblings(".no-items").removeClass("active"),r.$storeList.find(".list").remove(),r.$storeList.html('<div class="list"></div>'),r.$brandList.find(".list").remove(),r.$brandList.html('<div class="list"></div>'),r.$brandList.data("brand-count",0),r.$localStore.find(".search-results").addClass("active"),$.each(i,function(e){var t=new google.maps.LatLng(i[e].wtbLatitudeValue,i[e].wtbLongitudeValue);r.markerIcon.url=100<=e?"/lg5-common-gp/images/customer/mark-00.png":"/lg5-common-gp/images/customer/mark-"+(parseInt(e,10)+101).toString().substr(1)+".png";var o=$.extend(!0,{},r.markerIcon);r.addMarkers(t,o,e),r.stores.push(i[e]),r.setRepairList(i,e),setTimeout(function(){scrollDesign()},300),n.extend(t),a+=r.map.getBounds().contains(t)?1:0}),0==r.$brandList.data("brand-count")&&(r.$brandList.removeClass("active"),r.$brandList.siblings(".btn-area").removeClass("active"),r.$brandList.siblings(".default-msg").removeClass("active"),r.$brandList.siblings(".no-items").addClass("active")),r.$resultBox.find(".list-box .view-detail-map").off("click").on("click",function(e){e.preventDefault(),e.stopPropagation(),r.infoBox.close();e=$(this).closest(".list-box").data("item");r.activeItem=e,r.offsetCenter(r.markers[e].getPosition(),0,-100,r.map),r.setStoreInfo(r.stores,r.infoBox,e),r.infoBox.open(r.map,r.markers[e]),r.$resultBox.find(".list-box").not($(this).closest(".list-box")).removeClass("active"),$(this).closest(".list-box").addClass("active")}),$(window).width()<768?r.$storeSection.addClass("active"):setTimeout(function(){r.$storeSection.addClass("active")},200),r.$storeSection.addClass("active"),r.zoom=r.map.getZoom(),r.searchHandle&&a<Math.min(2,i.length)){for(var t=new google.maps.LatLngBounds,o=0;o<Math.min(2,i.length);o++){var s=new google.maps.LatLng(i[o].wtbLatitudeValue,i[o].wtbLongitudeValue);t.extend(s)}setTimeout(function(){google.maps.event.addListenerOnce(r.map,"bounds_changed",function(e){17<r.map.getZoom()&&r.map.setZoom(17)});var e=new google.maps.LatLng(r.map.getCenter().lat(),r.map.getCenter().lng());t.extend(e),r.map.fitBounds(t),r.offsetCenter(r.markers[0].getPosition(),0,0,r.map)},350)}else r.searchHandle&&a>=Math.min(2,i.length)&&r.offsetCenter(r.markers[0].getPosition(),0,0,r.map);$(window).width()<768&&3<i.length&&(r.$storeList.siblings(".btn-area").addClass("active"),r.$storeList.hasClass("mCustomScrollbar")&&r.$storeList.mCustomScrollbar("disable",!0),r.$brandList.hasClass("mCustomScrollbar")&&r.$brandList.mCustomScrollbar("disable",!0),setTimeout(function(){var e=r.$storeList.find(".list");e.on("init reInit afterChange",function(e,t,o,i){o=(o||0)+1;r.$storeList.siblings(".btn-area").find(".total-page").text(t.slideCount),r.$storeList.siblings(".btn-area").find(".current-page").text(o)}),e.slick({adaptiveHeight:!0,rows:3,slidesPerRow:1,infinite:!1,dots:!1,speed:500,prevArrow:"#storeResult .pagination .prev",nextArrow:"#storeResult .pagination .next"})},500),3<r.$brandList.data("brand-count")&&(r.$brandList.siblings(".btn-area").addClass("active"),setTimeout(function(){var e=r.$brandList.find(".list");e.on("init reInit afterChange",function(e,t,o,i){o=(o||0)+1;r.$brandList.siblings(".btn-area").find(".total-page").text(t.slideCount),r.$brandList.siblings(".btn-area").find(".current-page").text(o)}),e.slick({adaptiveHeight:!0,rows:3,slidesPerRow:1,infinite:!1,dots:!1,speed:500,prevArrow:"#brandResult .pagination .prev",nextArrow:"#brandResult .pagination .next"})},500)))}else"Y"==e.businessErrorFlag&&null!=e.redirectUrl?location.href=e.redirectUrl:r.setErrorList()}else"Y"==e.businessErrorFlag&&null!=e.redirectUrl?location.href=e.redirectUrl:r.setErrorList();r.map.process=!1},complete:function(){r.searchHandle=!1,$(".GPC0102 .map-container").trigger("ajaxLoadEnd")}})},getStore:function(e){var t=this;clearTimeout(t.timing.queryTimeout),t.infoBox.getVisible()&&!e||(t.reset(),t.timing.queryTimeout=setTimeout($.proxy(t.queryData,t),200))},setCountry:function(e,t){var o=this;o.geocoder=new google.maps.Geocoder;var i={},i=o.openDirection||"latlng"==t?{location:e}:"country"==t?{componentRestrictions:{country:e}}:{address:e};o.geocoder.geocode(i,$.proxy(function(e,t){t==google.maps.GeocoderStatus.OK&&(o.geoResult.locations=e[0].geometry.location,o.offsetCenter(o.geoResult.locations,0,0,o.map),n=!1)},this))},addMarkers:function(e,t,o){var i=this;new google.maps.LatLngBounds;(t=new google.maps.Marker({map:i.map,icon:t,draggable:!1,position:e,zIndex:1})).setVisible(!0),i.markers.push(t),google.maps.event.addListener(t,"click",function(e){i.infoBox.open(i.map,this),i.onItem(o),i.focusList(o)}),google.maps.event.addListener(t,"mouseover",function(){this.setOptions({zIndex:9})})},offsetCenter:function(e,t,o,i){var n=Math.pow(2,i.getZoom()),e=i.getProjection().fromLatLngToPoint(e),n=new google.maps.Point(t/n||0,o/n||0),n=new google.maps.Point(e.x-n.x,e.y+n.y),n=i.getProjection().fromPointToLatLng(n);i.panTo(n)},setStoreInfo:function(e,t,o){for(var e=e[o],o=this.templateMap.replace(/\*itemNum\*/g,o).replace(/\*distance\*/g,e.distance).replace(/\*logo\*/g,e.logo||"/lg5-common-gp/images/common/product-default-list-165.jpg").replace(/\*wtbName\*/g,e.wtbName).replace(/\*address\*/g,e.address).replace(/\*addressLine1Info\*/g,e.addressLine1Info||e.address).replace(/\*pinCode\*/g,e.pinCode).replace(/\*stdCode\*/g,e.stdCode).replace(/\*wtbPhoneNo\*/g,e.wtbPhoneNo).replace(/\*wtbFaxNo\*/g,e.wtbFaxNo).replace(/\*wtbEmail\*/g,e.wtbEmail).replace(/\*wtbTime\*/g,e.wtbTime).replace(/\*wtbUrl\*/g,e.wtbUrl).replace(/\*productCode\*/g,e.productCode.join(", ")),o=$(o),i=o.find("*[data-key]"),n=0;n<i.length;n++){var a=i.eq(n),s=e[a.get(0).getAttribute("data-key")];s&&null!=s||a.remove()}o=o.get(0).outerHTML;t.setContent(o)},searchAddress:function(e){var t,o,a=this,i=a.$searchInput.val();a.$searchForm.find("select, input");if(a.geocoder=new google.maps.Geocoder,e.preventDefault(),null==a.options.country)return a.$storeList.removeClass("active"),a.$brandList.removeClass("active"),a.$defaultMsg.addClass("active"),a.$noItems.removeClass("active"),void a.$btnArea.removeClass("active");0<a.$countryCombo.length?(t=!a.hasSearchInput||""==a.$searchInput.val()||null==a.$searchInput.val()?{address:a.options.country,componentRestrictions:{country:a.options.country}}:{address:a.$searchInput.val(),region:a.options.country},0<a.$stepCity.length&&(t=""==a.$searchInput.val()||null==a.$searchInput.val()?(a.$stepCity.val(),{address:a.$stepCity.val(),region:a.options.country}):(a.$stepCity.find("option:last-child").prop("selected",!0).trigger("chosen:updated"),{address:a.$searchInput.val(),region:a.options.country}))):t=0<a.$searchInput.length&&a.$searchInput.is(":visible")?0<a.$stepCity.length?""==a.$searchInput.val()||null==a.$searchInput.val()?(a.$stepCity.val(),{address:a.$stepCity.val(),region:a.options.country}):(a.$stepCity.find("option:last-child").prop("selected",!0).trigger("chosen:updated"),{address:a.$searchInput.val()}):{address:a.$searchInput.val()}:0<a.$cityCombo.length&&0<a.$stateCombo.length?{address:a.$cityCombo.val()+" "+a.$stateCombo.val()}:0<a.$cityCombo.length?{address:a.$cityCombo.val()}:0<a.$stateCombo.length?{address:a.$stateCombo.val()}:{address:a.options.country},"null"!=i&&null!=i&&(DEBUG&&console.log(t),a.geocoder.geocode(t,function(e,t){if(t==google.maps.GeocoderStatus.OK){var o=e[0].geometry,i=o.location,t=e[0].formatted_address,o=o.viewport;a.center=a.map.getCenter(),a.results=e[0].address_components,a.zipcode;for(var n=a.results.length-1;-1<n;n--)if(a.address=a.results[n],"postal_code"==a.address.types[0]){a.zipcode=a.address.long_name;break}google.maps.Animation.DROP;a.$resultLocation.text(t),a.map.fitBounds(o),a.afterSearch(),a.afterControl=!0}else a.reset(),a.setErrorList(),a.afterControl=!1}),o=$(".store-list",a.$storeSearchForm),0<$(".navigation").length&&!$(".navigation").is(".mobile-device")&&setTimeout(function(){$(window).width()<768?o.hasClass("mCustomScrollbar")&&o.mCustomScrollbar("disable",!0):o.hasClass("mCustomScrollbar")&&o.mCustomScrollbar("update")},500))},afterSearch:function(){this.reset(),this.searchHandle=!0,this.distance=25,this.getStore()},focusList:function(e,t){var o,i,n;0<$(".navigation").length&&(i=(o=$(".tabs-cont.active").find(".result-list")).find(".list"),n=Math.floor(e/3),$(".navigation").is(".mobile-device")?0<=e&&e<3?i.slick("slickGoTo",0,!0):i.slick("slickGoTo",n,!0):(e=i.find('.list-box[data-item="'+e+'"]'),o.mCustomScrollbar("scrollTo",e)))},onItem:function(e){var t=this;$("div.list-box","#storeResult").removeClass("active").filter("div.list-box[data-item='"+e+"']").addClass("active"),$("div.list-box","#brandResult").removeClass("active").filter("div.list-box[data-item='"+e+"']").addClass("active"),void 0!==t.infoBox&&(void 0===e||"undefined"==e?(t.infoBox.close(),t.activeItem=null):t.activeItem!=e?(t.infoBox.close(),t.activeItem=e,$(window).width(),t.offsetCenter(t.markers[e].getPosition(),0,-100,t.map),t.setStoreInfo(t.stores,t.infoBox,e),t.infoBox.open(t.map,t.markers[e])):t.activeItem!=e||t.infoBox.getVisible()||(t.infoBox.Content(null),t.offsetCenter(t.markers[e].getPosition(),0,-100,t.map),t.setStoreInfo(t.stores,t.infoBox,e),t.infoBox.open(t.map,t.markers[e])))},setDirection:function(e){var t=this,o=document.getElementById("startInput");if(t.$routeList.html(null),t.openDirection){t.stores[e];for(var i=0;i<t.markers.length;i++)t.markers[i].getVisible()&&t.markers[i].setVisible(!1);t.markers[e].setVisible(!0),t.directionAutocomplete=new google.maps.places.Autocomplete(o,t.autoCompleteOption),google.maps.event.addListener(t.directionAutocomplete,"place_changed",$.proxy(function(e){t.$directionsForm.submit()},t)),t.$routeList.removeClass("active"),t.$routeList.siblings(".direction-title").removeClass("active"),t.$routeList.siblings(".default-msg").addClass("active"),t.$routeList.siblings(".no-items").removeClass("active")}},setDirectionPanel:function(e){e.preventDefault();var i=this,t=document.getElementById("directionRoute"),o=i.options.unitMetric?google.maps.UnitSystem.METRIC:google.maps.UnitSystem.IMPERIAL,n=i.directionAutocomplete.getPlace(),e=i.markers[i.activeItem].getPosition();if(void 0!==n){if(!n.geometry)return i.$routeList.removeClass("active"),i.$routeList.siblings(".direction-title").removeClass("active"),i.$routeList.siblings(".default-msg").removeClass("active"),void i.$routeList.siblings(".no-items").addClass("active");i.$routeList.addClass("active"),i.$routeList.siblings(".direction-title").addClass("active"),i.$routeList.siblings(".default-msg").removeClass("active"),i.$routeList.siblings(".no-items").removeClass("active");o={origin:n.geometry.location,destination:e,travelMode:google.maps.TravelMode.DRIVING,unitSystem:o};i.directionsDisplay&&(i.directionsDisplay.setMap(i.map),i.directionsDisplay.setPanel(t)),i.directionService.route(o,function(e,t){if(t==google.maps.DirectionsStatus.OK){i.directionsDisplay.setDirections(e);for(var o=0;o<i.markers.length;o++)i.markers[o].getVisible()&&i.markers[o].setVisible(!1);i.infoBox.close()}else i.directionsDisplay.setMap(null),i.directionsDisplay.setPanel(null)})}},setRestrictionByGeocode:function(e){var i=this;i.geocoder.geocode({location:e},function(e,t){if(t==google.maps.GeocoderStatus.OK){i.results=e[0].address_components;for(var o=i.results.length-1;-1<o;o--)if(i.address=i.results[o],"postal_code"==i.address.types[0]){i.zipcode=i.address.long_name;break}}})},clearMarker:function(e){for(var t=0;t<this.markers.length;t++)this.markers[t].setMap(null);this.markers=[]},setRepairList:function(e,t){for(var o=this,e=e[t],t=o.templateList.replace(/\*itemNum\*/g,t).replace(/\*itemNum2\*/g,parseInt(t)+1).replace(/\*distance\*/g,e.distance).replace(/\*logo\*/g,e.logo||"/lg5-common-gp/images/common/product-default-list-165.jpg").replace(/\*wtbName\*/g,e.wtbName).replace(/\*address\*/g,e.address).replace(/\*addressLine1Info\*/g,e.addressLine1Info||e.address).replace(/\*pinCode\*/g,e.pinCode).replace(/\*stdCode\*/g,e.stdCode).replace(/\*wtbPhoneNo\*/g,e.wtbPhoneNo).replace(/\*wtbFaxNo\*/g,e.wtbFaxNo).replace(/\*wtbEmail\*/g,e.wtbEmail).replace(/\*wtbTime\*/g,e.wtbTime).replace(/\*wtbUrl\*/g,e.wtbUrl).replace(/\*productCode\*/g,e.productCode.join(", ")),t=$(t),i=t.find("*[data-key]"),n=0;n<i.length;n++){var a=i.eq(n),s=e[a.get(0).getAttribute("data-key")];s&&null!=s||a.remove()}t=t.get(0).outerHTML;o.$storeList.find(".list").append(t),o.$storeList.find(".list").hasClass("slick-initialized")&&o.$storeList.find(".list").slick("unslick"),o.options.useBrand&&"true"==e.brand&&(o.$brandList.data("brand-count",parseInt(o.$brandList.data("brand-count"))+1),o.$brandList.find(".list").append(t),o.$brandList.find(".list").hasClass("slick-initialized")&&o.$brandList.find(".list").slick("unslick"))},setErrorList:function(){var e=this;e.$storeList.removeClass("active"),e.$brandList.removeClass("active"),e.$defaultMsg.removeClass("active"),e.$btnArea.removeClass("active"),e.$noItems.addClass("active")},reset:function(){var e=this;e.clearMarker(),e.onItem(),e.activeItem=null,void 0!==e.infoBox&&e.infoBox.close(),e.infoBox.setContent(null),e.directionsDisplay.setMap(null),e.directionsDisplay.setPanel(null),e.$storeList.mCustomScrollbar("destroy"),e.$brandList.mCustomScrollbar("destroy"),e.$storeList.find(".list").html(""),e.$brandList.find(".list").html(""),e.$storeSection.addClass("active"),e.$noItems.removeClass("active"),e.$btnArea.removeClass("active"),(e.$storeList.hasClass("slick-slider")||e.$storeList.hasClass("slick-initialized"))&&(e.$storeList.slick("unslick"),e.$storeList.removeClass("slick-slider").removeClass("slick-initialized"))},resizing:function(){var e=this;e.center=e.map.getCenter(),google.maps.event.trigger(e.map,"resize"),e.map.setCenter(e.center)}})._init()}),$(window).scroll(function(){var e=$(".GPC0102 .find-locally").eq(0).offset().top,t=e+$(".GPC0102 .find-locally").eq(0).height();isInScreen(e,t)&&(C||(C=!0,e=document.createElement("script"),t=document.documentElement.lang,"tw"==COUNTRY_CODE.toLowerCase()&&(t="zh-TW"),e.src="//maps.googleapis.com/maps/api/js?v=3.39&libraries=places&client=gme%2Dlgelectronicsinc1&callback=initialize&region=KR&language="+t,document.body.appendChild(e)))}).scroll()),0<y.find(".find-locally-cn").length&&(y.find(".find-locally-cn").each(function(){var e=$(this).find(".map-container");if("undefined"!=typeof ePrivacyCookies&&!ePrivacyCookies.get("LGCOM_IMPROVEMENTS"))return e.parent().find(".searchbox-wrap").remove(),e.parent().find(".search-results").remove(),ePrivacyCookies.view("load","",e),e.css("background","#fff"),e.closest(".find-locally-cn").addClass("active"),!1;e.closest(".find-locally-cn").addClass("active")}),b=function(){var d=window.BMapLib=d||{};!function(){var e,l=t=l||{version:"1.5.0"};l.guid="$BAIDU$",window[l.guid]=window[l.guid]||{},l.lang=l.lang||{},l.lang.isString=function(e){return"[object String]"==Object.prototype.toString.call(e)},l.lang.isFunction=function(e){return"[object Function]"==Object.prototype.toString.call(e)},l.lang.Event=function(e,t){this.type=e,this.returnValue=!0,this.target=t||null,this.currentTarget=null},l.object=l.object||{},l.extend=l.object.extend=function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e},l.event=l.event||{},l.event._listeners=l.event._listeners||[],l.dom=l.dom||{},l.dom._g=function(e){return l.lang.isString(e)?document.getElementById(e):e},l._g=l.dom._g,l.event.on=function(e,t,o){return e},l.event.un=function(e,t,o){e=l.dom._g(e),t=t.replace(/^on/i,"").toLowerCase();for(var i,n,a=l.event._listeners,s=a.length,r=!o;s--;)(n=a[s])[1]!==t||n[0]!==e||!r&&n[2]!==o||(i=n[4],n=n[3],e.removeEventListener?e.removeEventListener(i,n,!1):e.detachEvent&&e.detachEvent("on"+i,n),a.splice(s,1));return e},l.un=l.event.un,l.dom.g=function(e){return"string"==typeof e||e instanceof String?document.getElementById(e):e&&e.nodeName&&(1==e.nodeType||9==e.nodeType)?e:null},l.g=l.G=l.dom.g,l.dom._styleFixer=l.dom._styleFixer||{},l.dom._styleFilter=l.dom._styleFilter||[],l.dom._styleFilter.filter=function(e,t,o){for(var i,n=0,a=l.dom._styleFilter;i=a[n];n++)(i=i[o])&&(t=i(e,t));return t},l.string=l.string||{},l.string.toCamelCase=function(e){return e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(/[-_][^-_]/g,function(e){return e.charAt(1).toUpperCase()})},l.dom.setStyle=function(e,t,o){var i,n=l.dom;return e=n.g(e),t=l.string.toCamelCase(t),(i=n._styleFilter)&&(o=i.filter(t,o,"set")),(i=n._styleFixer[t])&&i.set?i.set(e,o):e.style[i||t]=o,e},l.setStyle=l.dom.setStyle,l.dom.setStyles=function(e,t){for(var o in e=l.dom.g(e),t)l.dom.setStyle(e,o,t[o]);return e},l.setStyles=l.dom.setStyles,l.browser=l.browser||{},l.browser.ie=l.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp.$1:void 0,l.dom._NAME_ATTRS=(e={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"},l.browser.ie<8?(e.for="htmlFor",e.class="className"):(e.htmlFor="for",e.className="class"),e),l.dom.setAttr=function(e,t,o){return e=l.dom.g(e),"style"==t?e.style.cssText=o:(t=l.dom._NAME_ATTRS[t]||t,e.setAttribute(t,o)),e},l.setAttr=l.dom.setAttr,l.dom.setAttrs=function(e,t){for(var o in e=l.dom.g(e),t)l.dom.setAttr(e,o,t[o]);return e},l.setAttrs=l.dom.setAttrs,l.dom.create=function(e,t){e=document.createElement(e),t=t||{};return l.dom.setAttrs(e,t)},t.undope=!0;var t=d.InfoBox=function(e,t,o){this._content=t||"",this._isOpen=!1,this._map=e,this._opts=o=o||{},this._opts.offset=o.offset||new BMap.Size(0,0),this._opts.boxClass=o.boxClass||"infoBox",this._opts.boxStyle=o.boxStyle||{},this._opts.enableAutoPan=!!o.enableAutoPan,this._opts.align=o.align||1};t.prototype=new BMap.Overlay,t.prototype.initialize=function(e){var t=this,o=this._div=l.dom.create("div",{class:this._opts.boxClass});l.dom.setStyles(o,this._opts.boxStyle),o.style.position="absolute",this._setContent(this._content);e=e.getPanes().floatPane;return e.style.width="auto",e.appendChild(o),this._getInfoBoxSize(),l.event.on(o,"onmousedown",function(e){t._stopBubble(e)}),l.event.on(o,"onmouseover",function(e){t._stopBubble(e)}),l.event.on(o,"click",function(e){t._stopBubble(e)}),l.event.on(o,"dblclick",function(e){t._stopBubble(e)}),o},t.prototype.draw=function(){this._isOpen&&this._adjustPosition(this._point)},t.prototype.open=function(e){var t,o=this;this._isOpen||(this._map.addOverlay(this),this._isOpen=!0,setTimeout(function(){o._dispatchEvent(o,"open",{point:o._point})},10)),e instanceof BMap.Point?(t=e,this._removeMarkerEvt()):e instanceof BMap.Marker&&(this._marker&&this._removeMarkerEvt(),t=e.getPosition(),this._marker=e,this._markerDragend||this._marker.addEventListener("dragend",this._markerDragend=function(e){o._point=e.point,o._adjustPosition(o._point),o._panBox(),o.show()}),this._markerDragging||this._marker.addEventListener("dragging",this._markerDragging=function(){o.hide(),o._point=o._marker.getPosition(),o._adjustPosition(o._point)})),this.show(),this._point=t,this._panBox(),this._adjustPosition(this._point)},t.prototype.close=function(){this._isOpen&&(this._map.removeOverlay(this),this._remove(),this._isOpen=!1,this._dispatchEvent(this,"close",{point:this._point}))},t.prototype.enableAutoPan=function(){this._opts.enableAutoPan=!0},t.prototype.disableAutoPan=function(){this._opts.enableAutoPan=!1},t.prototype.setContent=function(e){this._setContent(e),this._getInfoBoxSize(),this._adjustPosition(this._point)},t.prototype.setPosition=function(e){this._point=e,this._adjustPosition(e),this._removeMarkerEvt()},t.prototype.getPosition=function(){return this._point},t.prototype.getOffset=function(){return this._opts.offset},t.prototype._remove=function(){this.domElement&&this.domElement.parentNode&&(l.event.un(this._div.firstChild,"click",this._closeHandler()),this.domElement.parentNode.removeChild(this.domElement)),this.domElement=null,this._isOpen=!1,this.dispatchEvent("onremove")},l.object.extend(t.prototype,{_setContent:function(e){this._div&&(void 0===e.nodeType?this._div.innerHTML=e:this._div.appendChild(e),this._content=e,this._addEventToClose())},_adjustPosition:function(e){var t=this._getPointPosition(e),o=this._marker&&this._marker.getIcon();switch(this._opts.align){case 1:this._marker?this._div.style.bottom=-(t.y-this._opts.offset.height-o.anchor.height+o.infoWindowAnchor.height)-this._marker.getOffset().height+2+"px":this._div.style.bottom=-(t.y-this._opts.offset.height)+"px";break;case 3:this._marker?this._div.style.top=t.y+this._opts.offset.height-o.anchor.height+o.infoWindowAnchor.height+this._marker.getOffset().height+"px":this._div.style.top=t.y+this._opts.offset.height+"px"}this._marker?this._div.style.left=t.x-o.anchor.width+this._marker.getOffset().width+o.infoWindowAnchor.width-this._boxWidth/2+"px":this._div.style.left=t.x-this._boxWidth/2+"px"},_getPointPosition:function(e){return this._pointPosition=this._map.pointToOverlayPixel(e),this._pointPosition},_getInfoBoxSize:function(){this._boxWidth=parseInt(this._div.offsetWidth,10),this._boxHeight=parseInt(this._div.offsetHeight,10)},_addEventToClose:function(){l.event.on(this._div.firstChild,"click",this._closeHandler()),this._hasBindEventClose=!0},_closeHandler:function(){var t=this;return function(e){t.close()}},_stopBubble:function(e){e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},_panBox:function(){if(this._opts.enableAutoPan){var e=parseInt(this._map.getContainer().offsetHeight,10),t=parseInt(this._map.getContainer().offsetWidth,10),o=this._boxHeight,i=this._boxWidth;if(!(e<=o||t<=i)){this._map.getBounds().containsPoint(this._point)||this._map.setCenter(this._point);var n,a=this._map.pointToPixel(this._point),s=i/2-a.x,t=i/2+a.x-t;switch(this._marker&&(n=this._marker.getIcon()),this._opts.align){case 1:var r=this._marker?n.anchor.height+this._marker.getOffset().height-n.infoWindowAnchor.height:0,l=o-a.y+this._opts.offset.height+r+2;break;case 3:var r=this._marker?-n.anchor.height+n.infoWindowAnchor.height+this._marker.getOffset().height+this._opts.offset.height:0,d=o+a.y-e+r+4}panX=0<s?s:0<t?-t:0,t=0<l?l:0<d?-d:0,this._map.panBy(panX,t)}}},_removeMarkerEvt:function(){this._markerDragend&&this._marker.removeEventListener("dragend",this._markerDragend),this._markerDragging&&this._marker.removeEventListener("dragging",this._markerDragging),this._markerDragend=this._markerDragging=null},_dispatchEvent:function(e,t,o){0!=t.indexOf("on")&&(t="on"+t);var i=new l.lang.Event(t);if(o)for(var n in o)i[n]=o[n];e.dispatchEvent(i)}})}();var n=!0,l={options:{country:"cn",zoomLevel:11,zoomLevelMin:2,zoomLevelMax:24,viewport:null,countryRestriction:!0,queryZoomLevel:11,queryUrl:$("#storeSearchForm").attr("action"),queryType:"json",unitMetric:!1,useDirection:!1,centerLatitude:null,centerLongitude:null,defaultLatitude:$(".find-locally-cn").data("default-latitude"),defaultLongitude:$(".find-locally-cn").data("default-longitude"),useController:!1,debug:!1,unit:"Mile",distance:25},init:function(){var e=this;e.region=$("#province").val(),e.city=$("#city").val(),e.superCategory=$("#superCategory").val(),e.category=$("#category").val(),e.map,e.center,e.searchPosition,e.activeItem,e.page,e.infobox,e.listOpen=!1,e.markers=[],e.stores=[],e.storeSort,e.brandPage=!1,e.geolocation,e.infoOptions={alignBottom:!0,disableAutoPan:!0,enableAutoPan:!1,offset:($(window).width(),new BMap.Size(0,0)),zIndex:99,boxStyle:{width:$(window).width()<768?"300px":"360px"},infoBoxClearance:{width:1,height:1},enableEventPropagation:!0,boxClass:$(window).width()<768?"info-window small":"info-window"},e.mapSetting()},mapSetting:function(){var e,t,o,i=this;i.map=new BMap.Map("storeMap"),e=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_RIGHT,type:BMAP_NAVIGATION_CONTROL_LARGE}),768<=$(window).width()&&(t=new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,isOpen:!1})),o=new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT}),i.map.enableScrollWheelZoom(),i.map.enableDoubleClickZoom(),i.map.addControl(e),i.map.addControl(t),i.map.addControl(o),i.addEvent(),n?(n=!1,i.map.centerAndZoom(new BMap.Point(i.options.defaultLongitude,i.options.defaultLatitude),i.options.zoomLevel)):i.map.centerAndZoom(new BMap.Point(116.4035,39.915),i.options.zoomLevel),i.markerCss={origin:{background:"url(http://api0.map.bdimg.com/images/dest_markers.png) no-repeat"},destination:{background:"url(http://api0.map.bdimg.com/images/dest_markers.png) no-repeat 0 -34px"}}},addEvent:function(){var o=this;o.$localStore=$(".find-locally-cn"),o.$searchForm=o.$localStore.find(".searchbox form"),o.$storeSection=o.$localStore.find(".information-on-map"),o.$toggleBtn=o.$localStore.find(".btn-collapse"),o.$resultBox=o.$localStore.find(".result-box"),o.$directionBox=o.$localStore.find(".direction-box"),o.$storeList=o.$localStore.find("#storeResult .result-list"),o.$searchInput=o.$localStore.find("#mapSearch"),o.$storeSearchForm=o.$localStore.find("#storeSearchForm"),o.$resultLocation=o.$localStore.find(".search-location"),o.$directionsForm=o.$localStore.find("#directionForm"),o.$storeMapArea=o.$localStore.find("#storeMap"),o.$routeList=o.$localStore.find("#directionRoute"),o.locaitonKey=document.getElementById("startInput"),o.hasSearchInput=o.$localStore.find(".search-results .search-area.type-store").hasClass("active"),o.hasSearchSubmit=0<o.$localStore.find(".searchbox-wrap .select-box button[type=submit]").length,o.$defaultMsg=o.$resultBox.find(".default-msg"),o.$noItems=o.$resultBox.find(".no-items"),o.$btnArea=o.$resultBox.find(".btn-area"),o.$locationBtn=o.$localStore.find("button.location"),o.templateList=o.$storeList.find("template.list").clone().html(),o.templateMap=o.$storeList.find("template.map").clone().html(),o.templatePage=o.$btnArea.find("template.page").clone().html(),o.$storeList.find("template.list").remove(),o.$storeList.find("template.map").remove(),o.$storeList.find("template.page").remove(),o.options.useBrand=0<o.$resultBox.find(".tabs-type-liner").length,o.options.useBrand||o.$localStore.addClass("no-tab"),o.geoResult={},o.markers=[],o.activeItem,o.searchHandle=!1,o.openDirection=!1,o.distance=o.options.distance,o.afterControl=!1,o.timing={queryTimeout:null},o.$province=o.$localStore.find("select[id=province]");var t=o.$province.data("param");t&&o.$province.find("option[value]").each(function(){var e=$(this).val();$(this).attr("data-param",t+"&state="+e)}),o.$province.drawAjaxOptions({dynamicParam:!0,url:o.$province.data("url"),setTarget:document.getElementById("city")}),o.$province.on("change",function(){o.region=$(this).val(),o.city="all",o.$storeSearchForm.find("input[name=region]").val(o.region),o.$storeSearchForm.find("input[name=city]").val(o.city)}),o.$city=o.$localStore.find("select[id=city]"),o.$city.on("change",function(){o.city=$(this).val(),o.$storeSearchForm.find("input[name=region]").val(o.region),o.$storeSearchForm.find("input[name=city]").val(o.city)}),o.$supercategory=o.$localStore.find("select[id=superCategory]");var e,i=o.$supercategory.data("param");i&&o.$supercategory.find("option[value]").each(function(){var e=$(this).val();$(this).attr("data-param",i+"&state="+e)}),o.$supercategory.drawAjaxOptions({dynamicParam:!0,url:o.$supercategory.data("url"),setTarget:document.getElementById("category")}),o.$supercategory.on("change",function(){o.superCategory=$(this).val(),o.category="all",o.$storeSearchForm.find("input[name=superCategory]").val(o.superCategory),o.$storeSearchForm.find("input[name=category]").val(o.category)}),o.$category=o.$localStore.find("select[id=category]"),o.$category.on("change",function(){o.category=$(this).val(),o.$storeSearchForm.find("input[name=superCategory]").val(o.superCategory),o.$storeSearchForm.find("input[name=category]").val(o.category)}),o.$province.val("").prop("selected",!0).trigger("change"),o.$searchForm.find("select").not("[id='province']").each(function(){$(this).val("all").prop("selected",!0).trigger("change")}),o.$searchForm.find("select").each(function(){$(this).trigger("chosen:updated")}),setTimeout(function(){o.$localStore.find(".searchbox-wrap .submit-box button[type=submit]").trigger("click")},500),$(".GPC0102").on("click",".get-direction",function(e){e.preventDefault(),o.openDirection=!0,o.$resultBox.removeClass("active"),o.$directionBox.addClass("active"),o.$localStore.find(".search-results .search-area.type-store").removeClass("active"),o.$localStore.find(".search-results .search-area.type-direction").addClass("active"),o.onItem($(this).data("num"));e=$(this).closest(".btns").siblings(".address").text();$(this).closest(".find-locally-cn").find(".search-area.type-direction .to div.input").text(e),o.setDirection(o.activeItem)}),$(".GPC0102").on("click",".search-area.type-direction .close a",function(e){e.preventDefault();var t=o.activeItem;o.reset(),o.$resultBox.addClass("active"),o.$directionBox.removeClass("active"),o.hasSearchInput&&o.$localStore.find(".search-results .search-area.type-store").addClass("active"),o.$localStore.find(".search-results .search-area.type-direction").removeClass("active"),$("#startInput").val(""),o.openDirection=!1,setTimeout(function(){o.addAllMarkers(o.data),o.$resultBox.find(".tabs-cont.active div.list-box[data-item="+t+"] .view-detail-map").trigger("click")},100)}),$(".GPC0102").on("click",".list-box .view-detail-map",function(e){e.preventDefault(),e.stopPropagation();e=$(this).closest(".list-box").data("item");o.onItem(e)}),$(".GPC0102").on("click","a.window-close",function(e){e.preventDefault(),o.infobox.close()}),o.$locationBtn.on("click",function(e){e.preventDefault(),o.geolocation=new BMap.Geolocation,o.getMyLocation()}),o.$toggleBtn.on("click",function(e){e.preventDefault();e=o.$storeSection;$(this).toggleClass("active"),e.toggleClass("active"),o.$localStore.find(".search-results").toggleClass("active"),o.resizing()}),o.$storeSearchForm.on("submit",$.proxy(o.searchAddress,o)),o.$directionsForm.on("submit",$.proxy(o.setDirectionPanel,o)),$(o.locaitonKey).on("change input",function(e){e.preventDefault(),setTimeout(function(){o.$directionsForm.find("input.submit").click()},200)}),o.$localStore.find(".searchbox form .submit-box button.btn.btn-primary").on("click",function(e){e.preventDefault(),o.$resultBox.addClass("active"),o.$storeSection.addClass("active"),o.$directionBox.removeClass("active"),o.$localStore.find(".search-results").addClass("active"),o.hasSearchInput&&o.$localStore.find(".search-results .search-area.type-store").addClass("active"),o.$localStore.find(".search-results .search-area.type-direction").removeClass("active"),o.$storeSearchForm.submit()}),"object"==typeof o.$storeSearchForm.get(0).length&&(e=isMobile?o.$storeSearchForm.get(0).length.getAttribute("data-mobile"):o.$storeSearchForm.get(0).length.getAttribute("data-desktop"),o.$storeSearchForm.get(0).length.value=e),$(".GPC0102").on("click",".find-locally-cn .btn-area .pagination a, .find-locally-cn .btn-area .pagination button",function(e){if(e.preventDefault(),$(this).attr("disabled"))return!1;o.$storeSearchForm.get(0).page.value=$(this).val()||$(this).attr("value");e=o.$storeSearchForm.serialize();o.pageAjax(o.options.queryUrl,e)})},searchAddress:function(e){e.preventDefault();var t,o=this;o.reset();var i=o.region,n=o.city;o.geocoder=new BMap.Geocoder;e={onSearchComplete:function(e){o.searchPosition.getStatus()==BMAP_STATUS_SUCCESS&&(o.map.centerAndZoom(e.getPoi(0).point,11),o.center=o.map.getCenter(),o.$resultLocation.text(""),e=o.$storeSearchForm.serialize(),o.pageAjax(o.options.queryUrl,e),o.afterControl=!0)}};o.searchPosition=new BMap.LocalSearch(o.map,e),void 0!==i&&void 0!==n&&(t="all"==i&&"all"==n?o.options.region:"all"!=n?n:i),t=t||"",o.searchPosition.search(t);var a=$(".store-list",o.$storeSearchForm);0<$(".navigation").length&&!$(".navigation").is(".mobile-device")&&setTimeout(function(){$(window).width()<768?a.hasClass("mCustomScrollbar")&&a.mCustomScrollbar("disable",!0):a.hasClass("mCustomScrollbar")&&a.mCustomScrollbar("update")},500)},pageAjax:function(e,t,o){var d=this;void 0!==t&&void 0!==d.storeSort&&(t.sort=d.storeSort),$(".GPC0102 .map-container").trigger("ajaxLoadBefore"),$.ajax({type:"post",url:e,data:void 0!==t?xssfilter(t):{},dataType:d.options.queryType,error:function(e){d.queryError()},success:function(e){d.map.process=!0,d.stores=[];for(var t=0;t<d.markers.length;t++)d.map.removeOverlay(d.markers[t]);if(e){data=e.data?e.data instanceof Array?e.data[0]:e.data:e;var o=data.distributors.length;if(o){d.data=data.distributors,d.$storeList.addClass("active"),d.$storeList.siblings(".btn-area").removeClass("active"),d.$storeList.siblings(".default-msg").removeClass("active"),d.$storeList.siblings(".no-items").removeClass("active");"Mile"==d.options.unit?d.distance:d.distance;d.addAllMarkers(data.distributors),$.each(data.distributors,function(e){d.stores.push(data.distributors[e])}),d.$storeList.find("div.list").empty();for(t=0;t<o;t++)d.setStoreList(data.distributors,t);var i=data.pageInfo;if(i){d.$btnArea.find(".pagination.visible-xs .prev").attr("disabled",!i.leftPage).attr("value",i.page-1),d.$btnArea.find(".pagination.visible-xs .next").attr("disabled",!i.rightPage).attr("value",i.page+1),d.$btnArea.find(".pagination.visible-xs").find(".page-counter .current-page").text(i.page),d.$btnArea.find(".pagination.visible-xs").find(".page-counter .total-page").text(i.pageCount),d.$btnArea.find(".pagination.hidden-xs .prev").attr("disabled",!i.leftPage).attr("value",i.page-1),d.$btnArea.find(".pagination.hidden-xs .next").attr("disabled",!i.rightPage).attr("value",i.page+1);for(var n=[],a=i.loopStart;a<=i.loopEnd;a++){var s,r=d.templatePage,l=(r=$(r).get(0)).querySelector("button");l.value=a,(l.innerHTML=a).toString()==i.page&&(l.setAttribute("class","active"),l.setAttribute("aria-current","page")),d.$btnArea.find(".pagination.hidden-xs").attr("data-aria-pattern")&&(s=d.$btnArea.find(".pagination.hidden-xs").attr("data-aria-pattern").replace(/\#/g,a),l.setAttribute("aria-label",s)),n+=r.outerHTML}d.$btnArea.find(".pagination.hidden-xs ul").html(n)}d.$btnArea.addClass("active")}else"Y"==e.businessErrorFlag&&null!=e.redirectUrl?location.href=e.redirectUrl:d.setErrorList()}else"Y"==e.businessErrorFlag&&null!=e.redirectUrl?location.href=e.redirectUrl:d.setErrorList();d.map.process=!1},complete:function(){d.searchHandle=!1,$(".GPC0102 .map-container").trigger("ajaxLoadEnd")}})},addAllMarkers:function(n){var a=this;$.each(n,function(t){var e,o=n[t].wtbAddress,i=$(window).width()<768?new BMap.Icon("/lg5-common-gp/images/customer/mark-"+(parseInt(t,10)+101).toString().substr(1)+".png",new BMap.Size(30,43)):new BMap.Icon("/lg5-common-gp/images/customer/mark-"+(parseInt(t,10)+101).toString().substr(1)+".png",new BMap.Size(30,43),{});null!=n[t].wtbLatitudeValue&&null!=n[t].wtbLongitudeValue?(e=new BMap.Point(n[t].wtbLongitudeValue,n[t].wtbLatitudeValue),a.addMarkers(e,i,t)):(new BMap.Geocoder).getPoint(o,function(e){e&&a.addMarkers(e,i,t)})})},addMarkers:function(e,t,o){var i=this,n=new BMap.Marker(e,{icon:t});i.markers[o]=n,i.map.addOverlay(n),n.addEventListener("click",function(){i.onItem(o),i.focusList(o),n.setTop(!0)}),n.addEventListener("mouseover",function(){n.setTop(!0)}),n.addEventListener("mouseout",function(){n.setTop(!1)})},onItem:function(e){var t=this;$("div.list-box","#storeResult").removeClass("active").filter("div.list-box[data-item='"+e+"']").addClass("active"),void 0===e?(void 0!==t.infobox&&t.infobox._isOpen&&t.infobox.close(),t.activeItem=null):t.activeItem!=e?(void 0!==t.infobox&&t.infobox._isOpen&&t.infobox.close(),t.activeItem=e,t.setStoreInfo(e),t.map.panTo(t.markers[e].getPosition()),t.center=t.map.getCenter(),t.infobox.open(t.markers[e].getPosition())):t.activeItem!=e||t.infobox._isOpen?t.activeItem==e&&t.infobox._isOpen&&(t.map.panTo(t.markers[e].getPosition()),t.center=t.map.getCenter()):(t.setStoreInfo(e),t.map.panTo(t.markers[e].getPosition()),t.center=t.map.getCenter(),setTimeout(function(){t.infobox.open(t.markers[e].getPosition())},100)),setTimeout(function(){0<t.$storeMapArea.find(".infowindow-wrap").length&&t.$storeMapArea.find(".infowindow-wrap").off(),0<t.$storeMapArea.find(".infowindowp").length&&t.$storeMapArea.find(".infowindow").off()},500)},focusList:function(e,t){var o;$(window).width()<768||0<$(".navigation").length&&!$(".navigation").is(".mobile-device")&&(o=$(".result-list",self.$storeSection)).mCustomScrollbar("scrollTo",o.find(".mCSB_container .list .list-box:eq("+e+")"))},setDirection:function(e){var t=this;document.getElementById("startInput");if(t.$routeList.html(null),t.openDirection){t.stores[e];for(var o=0;o<t.markers.length;o++)o==e?t.map.addOverlay(t.markers[o]):t.map.removeOverlay(t.markers[o]);setTimeout(function(){t.autoZipcode("startInput")},100)}},autoZipcode:function(e){this.autoComplete=new BMap.Autocomplete({input:e,location:this.map}),this.autoComplete.addEventListener("onhighlight",function(e){var t=e.fromitem.value,o="";-1<e.fromitem.index&&(o=t.province+t.city+t.district+t.street+t.business),e.fromitem.index,o="",-1<e.toitem.index&&(o=(t=e.toitem.value).province+t.city+t.district+t.street+t.business),e.toitem.index}),this.autoComplete.addEventListener("onconfirm",function(e){e=e.item.value;e.province,e.city,e.district,e.street,e.business})},setDirectionPanel:function(e){var o=this;e.preventDefault();var e={renderOptions:{map:o.map,panel:"directionRoute",autoViewport:!0},onSearchComplete:function(e){0===i.getStatus()?(o.$routeList.addClass("active"),o.$routeList.siblings(".direction-title").removeClass("active"),o.$routeList.siblings(".default-msg").removeClass("active"),o.$routeList.siblings(".no-items").removeClass("active"),setTimeout(function(){o.$storeMapArea.find(".BMap_Marker.BMap_noprint").css(o.markerCss.origin),o.$storeMapArea.find(".BMap_Marker.BMap_noprint").last().css(o.markerCss.destination)},100)):(o.reset(),o.$routeList.removeClass("active"),o.$routeList.siblings(".direction-title").removeClass("active"),o.$routeList.siblings(".default-msg").removeClass("active"),o.$routeList.siblings(".no-items").addClass("active"))}},i=new BMap.DrivingRoute(o.map,e);o.geocoder.getPoint(document.getElementById("startInput").value,function(t){t?o.geocoder.getPoint(o.options.centerAddr,function(e){e?(o.map.clearOverlays(),i.search(t,e)):(o.reset(),o.$routeList.removeClass("active"),o.$routeList.siblings(".direction-title").removeClass("active"),o.$routeList.siblings(".default-msg").removeClass("active"),o.$routeList.siblings(".no-items").addClass("active"))}):(o.reset(),o.$routeList.removeClass("active"),o.$routeList.siblings(".direction-title").removeClass("active"),o.$routeList.siblings(".default-msg").removeClass("active"),o.$routeList.siblings(".no-items").addClass("active"))})},getMyLocation:function(){var n=this;if("disabled"!=$(this).siblings("input[type=text]").attr("disabled")){if(n.geocoder=new BMap.Geocoder,null==n.options.country)return n.$storeList.removeClass("active"),n.$defaultMsg.addClass("active"),n.$noItems.removeClass("active"),void n.$btnArea.removeClass("active");n.geolocation?n.geolocation.getCurrentPosition(function(e){var t;this.getStatus()==BMAP_STATUS_SUCCESS&&(t=new BMap.Marker(e.point),n.map.addOverlay(t),n.map.panTo(e.point),e=new BMap.Point(e.point.lng,e.point.lat),n.map.centerAndZoom(e,12),console.log("self.geoResult.locations",n.geoResult.locations),n.geocoder.getLocation(e,$.proxy(function(e){var t,o=e.addressComponents,i="";for(t in o)"province"!=t&&(i=o[t]?o[t]+" "+i:i);console.log(i),n.openDirection?document.getElementById("startInput").value=i:document.getElementById("mapSearch").value=i},this)))},e,{enableHighAccuracy:!0}):e()}function e(e){e&&console.log(e.code,e.message),0<$("#geoLocationError").length&&$("#geoLocationError").modal()}},setErrorList:function(){this.$storeList.removeClass("active"),this.$defaultMsg.removeClass("active"),this.$btnArea.removeClass("active"),this.$noItems.addClass("active")},queryError:function(){this.reset(),this.setErrorList()},reset:function(){var e=this;e.openDirection?(e.map.clearOverlays(),void 0!==e.infobox&&e.infobox._isOpen&&e.infobox.close(),e.$routeList.removeClass("active"),e.$routeList.siblings(".direction-title").removeClass("active"),e.$routeList.siblings(".default-msg").addClass("active"),e.$routeList.siblings(".no-items").removeClass("active")):(e.map.clearOverlays(),e.onItem(),e.activeItem=null,e.$storeList.removeClass("active"),e.$defaultMsg.addClass("active"),e.$btnArea.removeClass("active"),e.$noItems.removeClass("active"))},resizing:function(){var e=this;e.center=e.map.getCenter(),setTimeout(function(){e.map.setCenter(e.center)},100)},setStoreInfo:function(e){for(var t=l,o=t.data,i=this.templateMap.replace(/\*itemNum\*/g,e).replace(/\*itemNum2\*/g,parseInt(e)+1).replace(/\*distributorId\*/g,o[e].distributorId).replace(/\*distributorTypeCode\*/g,o[e].distributorTypeCode).replace(/\*wtbName\*/g,o[e].wtbName).replace(/\*wtbAddress\*/g,o[e].wtbAddress).replace(/\*stateCode\*/g,o[e].stateCode).replace(/\*stateName\*/g,o[e].stateName).replace(/\*stateCodeSort\*/g,o[e].stateCodeSort).replace(/\*cityName\*/g,o[e].cityName).replace(/\*addressLine1Info\*/g,o[e].addressLine1Info).replace(/\*addressLine2Info\*/g,o[e].addressLine2Info).replace(/\*addressLine3Info\*/g,o[e].addressLine3Info).replace(/\*addressLine4Info\*/g,o[e].addressLine4Info).replace(/\*postalCode\*/g,o[e].postalCode).replace(/\*wtbPhoneNo\*/g,o[e].wtbPhoneNo).replace(/\*phone2No\*/g,o[e].phone2No).replace(/\*faxNo\*/g,o[e].faxNo).replace(/\*siteUrlAddr\*/g,o[e].siteUrlAddr).replace(/\*emailAddr\*/g,o[e].emailAddr).replace(/\*wtbLatitudeValue\*/g,o[e].wtbLatitudeValue).replace(/\*wtbLongitudeValue\*/g,o[e].wtbLongitudeValue).replace(/\*brandShopFlag\*/g,o[e].brandShopFlag).replace(/\*dealerSize\*/g,o[e].dealerSize),i=$(i),n=i.find("*[data-key]"),a=0;a<n.length;a++){var s=n.eq(a),r=s.get(0).getAttribute("data-key"),r=o[e][r];r&&null!=r||s.remove()}i=i.get(0).outerHTML;t.infobox=new d.InfoBox(t.map,i,t.infoOptions)},setStoreList:function(e,t){for(var o=this.templateList.replace(/\*itemNum\*/g,t).replace(/\*itemNum2\*/g,parseInt(t)+1).replace(/\*distributorId\*/g,e[t].distributorId).replace(/\*distributorTypeCode\*/g,e[t].distributorTypeCode).replace(/\*wtbName\*/g,e[t].wtbName).replace(/\*wtbAddress\*/g,e[t].wtbAddress).replace(/\*stateCode\*/g,e[t].stateCode).replace(/\*stateName\*/g,e[t].stateName).replace(/\*stateCodeSort\*/g,e[t].stateCodeSort).replace(/\*cityName\*/g,e[t].cityName).replace(/\*addressLine1Info\*/g,e[t].addressLine1Info).replace(/\*addressLine2Info\*/g,e[t].addressLine2Info).replace(/\*addressLine3Info\*/g,e[t].addressLine3Info).replace(/\*addressLine4Info\*/g,e[t].addressLine4Info).replace(/\*postalCode\*/g,e[t].postalCode).replace(/\*wtbPhoneNo\*/g,e[t].wtbPhoneNo).replace(/\*phone2No\*/g,e[t].phone2No).replace(/\*faxNo\*/g,e[t].faxNo).replace(/\*siteUrlAddr\*/g,e[t].siteUrlAddr).replace(/\*emailAddr\*/g,e[t].emailAddr).replace(/\*wtbLatitudeValue\*/g,e[t].wtbLatitudeValue).replace(/\*wtbLongitudeValue\*/g,e[t].wtbLongitudeValue).replace(/\*brandShopFlag\*/g,e[t].brandShopFlag).replace(/\*dealerSize\*/g,e[t].dealerSize),o=$(o),i=o.find("*[data-key]"),n=0;n<i.length;n++){var a=i.eq(n),s=a.get(0).getAttribute("data-key"),s=e[t][s];s&&null!=s||a.remove()}o=o.get(0).outerHTML;this.$storeList.find("div.list").append(o)}};l.init();var i={el:document.getElementById("modal_sms_send"),form:document.getElementById("smsSendForm"),openBtn:document.querySelectorAll('[href="#modal_sms_send"]'),hasCaptcha:!!$("#modal_sms_send").find("#customizedCaptcha").length,captchaText:$("#modal_sms_send").find("#captchaCodeTextBox"),content:{$inputCon:null,$completeCon:null},init:function(){i.content.$inputCon=$(i.el).find(".area-form"),i.content.$completeCon=$(i.el).find(".area-result"),i.addEvent()},addEvent:function(){$("#smsSendSubmit").on({click:function(e){e.preventDefault(),!$(i.form).checkValidation()||i.hasCaptcha&&!i.captchaText.val()||i.getSmsSendResult()}}),$("body").on({click:function(e){e.preventDefault(),i.currentItem=$(this).closest(".list-box").data("item"),i.resetModalContent(),$("#modal_sms_send").modal()}},'a[href="#modal_sms_send"]')},resetModalContent:function(){i.content.$completeCon.hide(),i.content.$inputCon.find("input:not([type=hidden])").val(""),i.content.$inputCon.find("input[type=checkbox]").prop("checked",!1),i.content.$inputCon.find(".field-block").removeClass("error").find(".error-msg span").hide(),i.content.$inputCon.show(),customizedCaptcha&&customizedCaptcha.ReloadImage()},getSmsSendResult:function(){var e=$(i.form).attr("data-result-url");if(!e)return!1;var t=i.currentItem,t=l.data[t],t={storeName:t.wtbName,storeAddress:t.addressLine1Info,storePhone:t.wtbPhoneNo,distributorId:t.distributorId,userPhone:i.form.txtBoxMobilePhone_sms.value,captcha:i.form.captchaCodeTextBox.value,marketing:!0,customizedCaptcha:i.form.LBD_VCID_customizedCaptcha.value};console.log(t),ajax.noCacheCall(e,t,"json",function(e){function t(e){console.log(e),1==e?(i.content.$inputCon.show(),i.content.$completeCon.hide()):(i.content.$inputCon.hide(),i.content.$completeCon.show()),1==e?i.content.$inputCon.find(".captcha-wrap .validationDiv").addClass("error").find(".error-msg .ajax-msg").show().siblings().hide():2==e?i.content.$completeCon.find(".send-complete .limit").show().siblings().hide():3==e?i.content.$completeCon.find(".send-complete .error").show().siblings().hide():4==e?i.content.$completeCon.find(".send-complete .fail").show().siblings().hide():5==e&&i.content.$completeCon.find(".send-complete .success").show().siblings().hide()}var o;e?(o=e.data[0].returnCode,e=e.data[0].returnMessage,o&&e?(console.log(o,e),t("success"==o?5:"check-number"==e?1:"countlimit"==e?2:"totalcountlimit"==e?3:4)):t(4)):t(4)},"post","body")}};document.getElementById("modal_sms_send")&&i.init()},"undefined"!=typeof ePrivacyCookies&&!ePrivacyCookies.get("LGCOM_IMPROVEMENTS")||(C=!1,$(window).scroll(function(){var e=$(".GPC0102 .find-locally-cn").eq(0).offset().top,t=e+$(".GPC0102 .find-locally-cn").eq(0).height();isInScreen(e,t)&&(C||(b(),C=!0))}))),$("body").on("click",".GPC0102 .btn-outline-secondary ,.GPC0102 .email ,.GPC0102 .phone,.GPC0102 .view-online,.GPC0102 .get-direction",function(){var e=$(this).attr("class"),t="",o="",i="",n=$(".js-compare").attr("data-model-suffixcode"),a=$(".js-compare").attr("data-model-id");-1!=e.indexOf("btn-outline-secondary")?(t="buy_online_click",i=$(this).closest("a").find(".text").text(),dataLayer.push({event:t,superCategory:_dl.page_name.super_category,category:standardData.level2,subcategory:standardData.level3,modelYear:_dl.page_name.model_year,modelName:_dl.products[0].model_name,modelCode:a,salesModelCode:_dl.products[0].sales_model_code,sku:_dl.page_name.sku,suffix:n,store:i,bu:standardData.level1})):(t="find_store_click",i=$(this).closest(".list-text-block").find(".view-detail-map").text(),-1!=e.indexOf("email")?o="email":-1!=e.indexOf("phone")?o="phone":-1!=e.indexOf("view-online")?o="online":-1!=e.indexOf("get-direction")&&(o="direction"),dataLayer.push({event:t,superCategory:_dl.page_name.super_category,category:standardData.level2,subcategory:standardData.level3,modelYear:_dl.page_name.model_year,modelName:_dl.products[0].model_name,modelCode:a,salesModelCode:_dl.products[0].sales_model_code,sku:_dl.page_name.sku,suffix:n,store:i,storeContact:o,bu:standardData.level1})),console.log(t)})});
//# sourceMappingURL=maps/GPC0102.min.js.map
