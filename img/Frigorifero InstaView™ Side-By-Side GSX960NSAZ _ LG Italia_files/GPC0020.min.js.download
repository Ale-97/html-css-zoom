/*! angular-google-maps 2.0.13 2015-02-25
 *  AngularJS directives for Google Maps
 *  git: https://github.com/angular-ui/angular-google-maps.git
 */
/*
!
The MIT License
 
Copyright (c) 2010-2013 Google, Inc. http://angularjs.org
 
Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the 'Software'), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
 
The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
 
THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
 
angular-google-maps
https://github.com/angular-ui/angular-google-maps
 
@authors
Nicolas Laplante - https://plus.google.com/108189012221374960701
Nicholas McCready - https://twitter.com/nmccready
*/
$(document).ready(function(){if(!document.querySelector(".GPC0020"))return!1;var i,e=document.getElementById("pdp_findadealer")||null;"N"==$("#findTheDealerFlag").val()&&$("#pdp_findadealer").remove(),window.initialize=function(){function i(e){e=e||{},google.maps.OverlayView.apply(this,arguments),this.content_=e.content||"",this.disableAutoPan_=e.disableAutoPan||!1,this.maxWidth_=e.maxWidth||0,this.pixelOffset_=e.pixelOffset||new google.maps.Size(0,0),this.position_=e.position||new google.maps.LatLng(0,0),this.zIndex_=e.zIndex||null,this.boxClass_=e.boxClass||"infoBox",this.boxStyle_=e.boxStyle||{},this.closeBoxMargin_=e.closeBoxMargin||"2px",this.closeBoxURL_=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===e.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=e.infoBoxClearance||new google.maps.Size(1,1),void 0===e.visible&&(void 0===e.isHidden?e.visible=!0:e.visible=!e.isHidden),this.isHidden_=!e.visible,this.alignBottom_=e.alignBottom||!1,this.pane_=e.pane||"floatPane",this.enableEventPropagation_=e.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}(i.prototype=new google.maps.OverlayView).createInfoBoxDiv_=function(){function t(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}var e,i,o,s=this;if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),void 0===this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(o=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-o.left-o.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],i=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],e=0;e<i.length;e++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,i[e],t));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(e){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",function(e){e.returnValue=!1,e.preventDefault&&e.preventDefault(),s.enableEventPropagation_||t(e)}),google.maps.event.trigger(this,"domready")}},i.prototype.getCloseBoxImg_=function(){var e="";return""!==this.closeBoxURL_&&(e="<a class='window-close' id='infoWindowClose'><div class='sr-only'>close</div></a>"),e},i.prototype.addClickHandler_=function(){var e;""!==this.closeBoxURL_?(e=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(e,"click",this.getCloseClickHandler_())):this.closeListener_=null},i.prototype.getCloseClickHandler_=function(){var t=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(t,"closeclick"),t.close()}},i.prototype.panBox_=function(e){var t,i,o,s,n,a,r,l,d,p=0,c=0;e||(d=this.getMap())instanceof google.maps.Map&&(d.getBounds().contains(this.position_)||d.setCenter(this.position_),d.getBounds(),t=(l=d.getDiv()).offsetWidth,i=l.offsetHeight,o=this.pixelOffset_.width,s=this.pixelOffset_.height,n=this.div_.offsetWidth,a=this.div_.offsetHeight,r=this.infoBoxClearance_.width,e=this.infoBoxClearance_.height,(l=this.getProjection().fromLatLngToContainerPixel(this.position_)).x<-o+r?p=l.x+o-r:l.x+n+o+r>t&&(p=l.x+n+o+r-t),this.alignBottom_?l.y<-s+e+a?c=l.y+s-e-a:l.y+s+e>i&&(c=l.y+s+e-i):l.y<-s+e?c=l.y+s-e:l.y+a+s+e>i&&(c=l.y+a+s+e-i),0===p&&0===c||(d.getCenter(),d.panBy(p,c)))},i.prototype.setBoxStyle_=function(){var e,t;if(this.div_){for(e in this.div_.className=this.boxClass_,this.div_.style.cssText="",t=this.boxStyle_)t.hasOwnProperty(e)&&(this.div_.style[e]=t[e]);this.div_.style.WebkitTransform="translateZ(0)",void 0!==this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*this.div_.style.opacity+')"',this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},i.prototype.getBoxWidths_=function(){var e,t={top:0,bottom:0,left:0,right:0},i=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(e=i.ownerDocument.defaultView.getComputedStyle(i,""))&&(t.top=parseInt(e.borderTopWidth,10)||0,t.bottom=parseInt(e.borderBottomWidth,10)||0,t.left=parseInt(e.borderLeftWidth,10)||0,t.right=parseInt(e.borderRightWidth,10)||0):document.documentElement.currentStyle&&i.currentStyle&&(t.top=parseInt(i.currentStyle.borderTopWidth,10)||0,t.bottom=parseInt(i.currentStyle.borderBottomWidth,10)||0,t.left=parseInt(i.currentStyle.borderLeftWidth,10)||0,t.right=parseInt(i.currentStyle.borderRightWidth,10)||0),t},i.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},i.prototype.draw=function(){this.createInfoBoxDiv_();var e=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=e.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(e.y+this.pixelOffset_.height)+"px":this.div_.style.top=e.y+this.pixelOffset_.height+"px",this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"},i.prototype.setOptions=function(e){void 0!==e.boxClass&&(this.boxClass_=e.boxClass,this.setBoxStyle_()),void 0!==e.boxStyle&&(this.boxStyle_=e.boxStyle,this.setBoxStyle_()),void 0!==e.content&&this.setContent(e.content),void 0!==e.disableAutoPan&&(this.disableAutoPan_=e.disableAutoPan),void 0!==e.maxWidth&&(this.maxWidth_=e.maxWidth),void 0!==e.pixelOffset&&(this.pixelOffset_=e.pixelOffset),void 0!==e.alignBottom&&(this.alignBottom_=e.alignBottom),void 0!==e.position&&this.setPosition(e.position),void 0!==e.zIndex&&this.setZIndex(e.zIndex),void 0!==e.closeBoxMargin&&(this.closeBoxMargin_=e.closeBoxMargin),void 0!==e.closeBoxURL&&(this.closeBoxURL_=e.closeBoxURL),void 0!==e.infoBoxClearance&&(this.infoBoxClearance_=e.infoBoxClearance),void 0!==e.isHidden&&(this.isHidden_=e.isHidden),void 0!==e.visible&&(this.isHidden_=!e.visible),void 0!==e.enableEventPropagation&&(this.enableEventPropagation_=e.enableEventPropagation),this.div_&&this.draw()},i.prototype.setContent=function(e){this.content_=e,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),void 0===e.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+e:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(e)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px",void 0===e.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+e:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(e))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},i.prototype.setPosition=function(e){this.position_=e,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},i.prototype.setZIndex=function(e){this.zIndex_=e,this.div_&&(this.div_.style.zIndex=e),google.maps.event.trigger(this,"zindex_changed")},i.prototype.setVisible=function(e){this.isHidden_=!e,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},i.prototype.getContent=function(){return this.content_},i.prototype.getPosition=function(){return this.position_},i.prototype.getZIndex=function(){return this.zIndex_},i.prototype.getVisible=function(){var e=void 0!==this.getMap()&&null!==this.getMap()&&!this.isHidden_;return e},i.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},i.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},i.prototype.open=function(e,t){var i=this;t&&(this.position_=t.getPosition(),this.moveListener_=google.maps.event.addListener(t,"position_changed",function(){i.setPosition(this.getPosition())})),this.setMap(e),this.div_&&this.panBox_()},i.prototype.close=function(){var e;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(e=0;e<this.eventListeners_.length;e++)google.maps.event.removeListener(this.eventListeners_[e]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)};var n=!0,d={options:{country:$("#pdp_findadealer").data("country"),zoomLevel:5,zoomLevelMin:2,zoomLevelMax:24,viewport:null,countryRestriction:!0,queryZoomLevel:$("#pdp_findadealer").data("query-zoom-level"),queryUrl:$("#pdp_findadealer").data("query-url"),queryType:"json",unitMetric:!1,useDirection:$("#repairCenter").data("use-direction"),centerLatitude:$("#repairCenter").data("center-latitude"),centerLongitude:$("#repairCenter").data("center-longitude"),defaultLatitude:$("#pdp_findadealer").data("default-latitude"),defaultLongitude:$("#pdp_findadealer").data("default-longitude"),txtViewOnMap:$("#pdp_findadealer").data("txt-viewonmap")||"View on map",useController:!1,debug:!1},_init:function(){this.$findaDealer=$(".GPC0020"),this.$repairSection=this.$findaDealer.find(".find-a-dealer-information"),this.$repairTitle=this.$findaDealer.find(".find-a-dealer-information .btn-collapse"),this.$repairStoreList=this.$findaDealer.find("#repairCenterResult"),this.$searchInput=this.$findaDealer.find("#mapSearch"),this.$productSelect=this.$findaDealer.find("#repairProduct"),this.$searchBtn=this.$findaDealer.find("#findadealerSearch"),this.$repairForm=this.$findaDealer.find("#repairForm"),this.$repairMapArea=this.$findaDealer.find("#repairMap"),this.$resultLocation=this.$findaDealer.find(".search-location"),this.$directionsForm=this.$findaDealer.find("#directionForm"),this.$expandaleMap=this.$findaDealer.find(".map-expend"),this.$countryCate=this.$findaDealer.find("#CountryCate");var i=this;i.geoResult={},i.markers=[],i.activeItem=null,i.searchHandle=!1,i.distance=25,i.afterControl=!1,i.openDirection=i.options.useDirection,i.timing={queryTimeout:null},i.markerIcon={size:new google.maps.Size(30,43),anchor:new google.maps.Point(19,54)},i.mapSetting(),this.$repairSection.removeClass("active"),this.$countryCate.on("change",function(e){var t=$(e.target).find(":selected"),e=t.val()||t.text(),t={address:t.text(),componentRestrictions:{country:e}};i.options.country=e,i.autoCompleteOption.componentRestrictions.country=e,i.geocoder.geocode(t,$.proxy(function(e,t){t==google.maps.GeocoderStatus.OK&&(i.geoResult.locations=e[e.length-1].geometry.location,i.geoResult.viewport=e[e.length-1].geometry.viewport,i.map.fitBounds(i.geoResult.viewport),i.center=i.map.getCenter())},this)),i.autoZipcode(i.keyword),$("#mapSearch").val("")})},mapSetting:function(){var e,t=this;t.mapDiv=document.getElementById("repairMap"),t.keyword=document.getElementById("mapSearch"),t.locaitonKey=document.getElementById("repairOrigin"),t.mapOptions={zoom:t.options.zoomLevel,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,mapTypeControlOptions:{position:ISRTL?google.maps.ControlPosition.RIGHT_TOP:google.maps.ControlPosition.LEFT_TOP},panControl:!1,panControlOptions:{position:ISRTL?google.maps.ControlPosition.LEFT_TOP:google.maps.ControlPosition.RIGHT_TOP},zoomControl:!0,zoomControlOptions:{position:ISRTL?google.maps.ControlPosition.LEFT_BOTTOM:google.maps.ControlPosition.RIGHT_BOTTOM},scaleControl:!1,scaleControlOptions:{position:ISRTL?google.maps.ControlPosition.LEFT_TOP:google.maps.ControlPosition.RIGHT_TOP},streetViewControl:!0,streetViewControlOptions:{position:ISRTL?google.maps.ControlPosition.LEFT_BOTTOM:google.maps.ControlPosition.RIGHT_BOTTOM},fullscreenControl:!0,fullscreenControlOptions:{position:ISRTL?google.maps.ControlPosition.LEFT_TOP:google.maps.ControlPosition.RIGHT_TOP},minZoom:t.options.zoomLevelMin,maxZoom:t.options.zoomLevelMax},t.infoOptions={disableAutoPan:!0,alignBottom:!0,pixelOffset:new google.maps.Size(-162,-54),zIndex:99,boxStyle:{width:$(window).width()<768?"300px":"360px"},infoBoxClearance:new google.maps.Size(1,1),enableEventPropagation:!0,boxClass:$(window).width()<768?"info-window small":"info-window"},t.map=new google.maps.Map(t.mapDiv,t.mapOptions),t.infoBox=new i(t.infoOptions),t.directionService=new google.maps.DirectionsService,t.directionsDisplay=new google.maps.DirectionsRenderer,t.mapControl(),t.center=t.map.getCenter(),n?(t.options.defaultLatitude&&t.options.defaultLongitude?(e=new google.maps.LatLng(t.options.defaultLatitude,t.options.defaultLongitude),t.setCountry(e,"latlng")):(n=!1,t.setCountry(t.options.country,"country")),t.autoZipcode(t.keyword)):t.openDirection?(e=new google.maps.LatLng(t.options.centerLatitude,t.options.centerLongitude),t.setCountry(e,"latlng"),t.map.setZoom(13),t.addMarkers(e),t.autoZipcode(t.locaitonKey),$.proxy(t.setDirectionPanel,t)):(t.setCountry(t.options.country,"country"),t.autoZipcode(t.keyword))},autoZipcode:function(e){$(".pac-container").remove();var t=this;t.autoCompleteOption={componentRestrictions:{country:t.options.country}},t.autoComplete=new google.maps.places.Autocomplete(e,t.autoCompleteOption),google.maps.event.addListener(t.autoComplete,"place_changed",$.proxy(function(e){t.autoComplete.getPlace()},t))},mapControl:function(){var t=this;google.maps.event.addListener(t.map,"dragend",$.proxy(function(e){t.center=t.map.getCenter(),t.openDirection||t.afterControl&&(t.getStore(),t.setRestrictionByGeocode(t.center)),google.maps.event.trigger(t.map,"resize")},t)),t.$findaDealer.delegate("a.repair-gps","click",$.proxy(function(e){var i=this;e.preventDefault(),i.openDirection?navigator.geolocation.getCurrentPosition(function(e){e=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);i.geocoder.geocode({latLng:e},$.proxy(function(e,t){t==google.maps.GeocoderStatus.OK&&(i.directionsAddress=e[0].formatted_address,document.getElementById("repairOrigin").value=i.directionsAddress)},this))}):navigator.geolocation.getCurrentPosition(function(e){e=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);i.gpsCenter=e,i.geocoder.geocode({latLng:e},$.proxy(function(e,t){t==google.maps.GeocoderStatus.OK&&(i.directionsAddress=e[0].formatted_address,document.getElementById("serviceCenterZip").value=i.directionsAddress)},this))})},t)),t.$repairTitle.on("click",function(e){e.preventDefault();e=d.$repairSection;e.hasClass("active")?e.removeClass("active"):e.addClass("active")}),t.$expandaleMap.on("click",$.proxy(t.mapExpand,t)),t.$repairForm.on("submit",$.proxy(t.searchAddress,t))},queryData:function(){var l=this;l.dataque=l.$repairForm.serialize()+"&"+$.param({lat:l.map.getCenter().lat(),lng:l.map.getCenter().lng(),zipCode:l.options.country,zoomLevel:l.options.queryZoomLevel}),l.center=l.map.getCenter(),l.clearMarker(),$(".GPC0020 .find-a-dealer-wrap").trigger("ajaxLoadBefore"),$.ajax({url:l.options.queryUrl,type:l.$repairForm.attr("method"),data:xssfilter(l.dataque),dataType:l.options.queryType,error:function(e){l.reset(),l.setErrorList()},success:function(e){l.map.process=!0,l.markers=[],l.stores=[];var o=e.data;if(o.length){var n=new google.maps.LatLngBounds,a=0;if(l.reset(),l.$repairStoreList.parent().find(".no-items").removeClass("active"),$.each(o,function(e){var t=new google.maps.LatLng(o[e].dealerLatitudeValue,o[e].dealerLongitudeValue);l.markerIcon.url=100<=e?"/lg5-common-gp/images/customer/mark-00.png":"/lg5-common-gp/images/customer/mark-"+(parseInt(e,10)+101).toString().substr(1)+".png";var i=$.extend(!0,{},l.markerIcon);l.addMarkers(t,i,e),l.stores.push(o[e]),l.setRepairList(o,e),n.extend(t),a+=l.map.getBounds().contains(t)?1:0}),l.$repairStoreList.find(".list .dealer-name a").off("click").on("click",function(e){e.preventDefault(),l.infoBox.close();e=$(this).data("item");l.activeItem=e,768<=$(window).width()?ISRTL?l.offsetCenter(l.markers[e].getPosition(),-220,-100,l.map):l.offsetCenter(l.markers[e].getPosition(),220,-100,l.map):l.offsetCenter(l.markers[e].getPosition(),0,-100,l.map),l.setStoreInfo(l.stores,l.infoBox,e),l.infoBox.open(l.map,l.markers[e]),$("#repairCenterResult .list").not($(this).closest(".list")).removeClass("active"),$(this).closest(".list").addClass("active");e=COUNTRY_CODE.toLowerCase();"ca_fr"!=e&&"ca_en"!=e||s&&s.tl(this,"o","find-a-dealer>"+$("#repairProduct").val()+">"+$(this).text())}),l.$repairStoreList.find(".list .button-wrap a.see").off("click").on("click",function(e){e.preventDefault(),$(this).closest(".list").find(".dealer-name a").click()}),$(window).width()<768?d.$repairSection.addClass("active"):setTimeout(function(){d.$repairSection.addClass("active")},200),d.$repairSection.addClass("active"),l.zoom=l.map.getZoom(),l.searchHandle&&a<Math.min(2,o.length)){for(var t=new google.maps.LatLngBounds,i=0;i<Math.min(2,o.length);i++){var r=new google.maps.LatLng(String(o[i].dealerLatitudeValue),String(o[i].dealerLongitudeValue));t.extend(r)}setTimeout(function(){google.maps.event.addListenerOnce(l.map,"bounds_changed",function(e){17<l.map.getZoom()&&l.map.setZoom(17)});var e=new google.maps.LatLng(l.map.getCenter().lat(),l.map.getCenter().lng());t.extend(e),l.map.fitBounds(t),l.offsetCenter(l.markers[0].getPosition(),0,0,l.map)},350)}else l.searchHandle&&a>=Math.min(2,o.length)&&l.offsetCenter(l.markers[0].getPosition(),0,0,l.map);$(window).width()<768&&3<o.length&&l.slickEvent(l.$repairStoreList)}else l.reset(),l.setErrorList();l.map.process=!1},complete:function(){l.searchHandle=!1,$(".GPC0020 .find-a-dealer-wrap").trigger("ajaxLoadEnd")}})},getStore:function(e){var t=this;clearTimeout(t.timing.queryTimeout),t.infoBox.getVisible()&&!e||(t.reset(),t.timing.queryTimeout=setTimeout($.proxy(t.queryData,t),200))},setCountry:function(e,t){var i=this;i.geocoder=new google.maps.Geocoder;var o={},o=i.openDirection||"latlng"==t?{location:e}:"country"==t?{componentRestrictions:{country:e}}:{address:e};i.geocoder.geocode(o,$.proxy(function(e,t){t==google.maps.GeocoderStatus.OK&&(i.geoResult.locations=e[0].geometry.location,i.$repairSection.hasClass("active")?ISRTL?i.offsetCenter(i.geoResult.locations,-220,-100,i.map):i.offsetCenter(i.geoResult.locations,220,-100,i.map):(i.offsetCenter(i.geoResult.locations,0,0,i.map),n=!1),$(window).width()<768&&i.offsetCenter(i.geoResult.locations,100,-80,i.map))},this))},addMarkers:function(e,t,i){var o=this,e=(new google.maps.LatLngBounds,new google.maps.Marker({map:o.map,icon:t,draggable:!1,position:e,zIndex:1}));e.setVisible(!0),o.markers.push(e),google.maps.event.addListener(e,"click",function(e){o.infoBox.open(o.map,this),o.onItem(i),o.focusList(i);var t=COUNTRY_CODE.toLowerCase();"ca_fr"!=t&&"ca_en"!=t||s&&s.tl(this,"o","find-a-dealer>"+$("#repairProduct").val()+">"+$(this).text())}),google.maps.event.addListener(e,"mouseover",function(){this.setOptions({zIndex:9})})},offsetCenter:function(e,t,i,o){var s=Math.pow(2,o.getZoom()),e=o.getProjection().fromLatLngToPoint(e),s=new google.maps.Point(t/s||0,i/s||0),s=new google.maps.Point(e.x-s.x,e.y+s.y),s=o.getProjection().fromPointToLatLng(s);o.panTo(s)},setStoreInfo:function(e,t,i){i=e[i];"string"!=typeof i.address&&(i.address=""),"string"!=typeof i.dealerPhoneNo&&(i.dealerPhoneNo=""),"string"!=typeof i.dealerEmail&&(i.dealerEmail=""),"string"!=typeof i.dealerUrl&&(i.dealerUrl=""),"string"!=typeof i.dealerTime&&(i.dealerTime=""),"string"!=typeof i.dealerFaxNo&&(i.dealerFaxNo=""),"string"!=typeof i.dealerDesc&&(i.dealerDesc=""),"string"!=typeof i.zipCode&&(i.zipCode="");var o="";if(o+='<div class="info-window-wrap">',(i.useSale||i.useInstall||i.useServices)&&(o+='<div class="icons">'),i.useSale&&(o+='<span class="icon-sales">sales</span>'),i.useInstall&&(o+='<span class="icon-install">install</span>'),i.useServices&&(o+='<span class="icon-service">service</span>'),(i.useSale||i.useInstall||i.useServices)&&(o+="</div>"),o+='<div class="dealer-name">'+i.dealerName+"</div>",""!=i.address&&(o+='<div class="dealer-address">'+i.address+"</div>"),""!=i.dealerPhoneNo&&" "!=i.dealerPhoneNo)if(0<i.dealerPhoneNo.indexOf("|")){var s=i.dealerPhoneNo.split("|");o+='<div class="dealer-phonenumber">';for(var n=0;n<s.length;n++)o+='<a href="tel:'+s[n]+'">'+s[n]+"</a><br />";o+="</div>"}else o+='<div class="dealer-phonenumber"><a href="tel:'+i.dealerPhoneNo+'">'+i.dealerPhoneNo+"</a></div>";""!=i.dealerFaxNo&&(o+='<div class="dealer-fax">'+i.dealerFaxNo+"</div>"),""!=i.dealerEmail&&(o+='<div class="dealer-email"><a href="mailto:'+i.dealerEmail+'">'+i.dealerEmail+"</a></div>"),""!=i.dealerUrl&&(o+='<div class="dealer-url"><a href="'+i.dealerUrl+'" target="_blank" class="link-text" >'+i.dealerUrl+"</a></div>"),""!=i.dealerTime&&(o+='<div class="dealer-time">'+i.dealerTime.replace(/&lt;/gi,"<").replace(/&gt;/gi,">")+"</div>"),o+="<div class='info-window-bottom'></div>",o+="</div>",t.setContent(o)},searchAddress:function(e){if(!$("#repairProduct").val())return!1;adobeTrackEvent("find-a-dealer-submit",{page_event:{find_dealer_search:!0}});var n=this,t=n.$searchInput.val();if(n.geocoder=new google.maps.Geocoder,e.preventDefault(),!t||""==t)return!1;n.geocoder.geocode({address:t,region:n.options.country},function(e,t){if(t==google.maps.GeocoderStatus.OK){var i=e[0].geometry,o=i.location,t=e[0].formatted_address,i=i.viewport;n.center=n.map.getCenter(),n.results=e[0].address_components,n.zipcode="";for(var s=n.results.length-1;-1<s;s--)if(n.address=n.results[s],"postal_code"==n.address.types[0]){n.zipcode=n.address.long_name;break}google.maps.Animation.DROP;n.map.fitBounds(i),n.afterSearch(),n.afterControl=!0}else n.reset(),n.setErrorList(),n.afterControl=!1});var i=$(".dealer-list",n.$repairSection);0<$(".navigation").length&&!$(".navigation").is(".mobile-device")&&setTimeout(function(){$(window).width()<768?i.hasClass("mCustomScrollbar")&&i.mCustomScrollbar("disable",!0):i.hasClass("mCustomScrollbar")&&i.mCustomScrollbar("update")},500)},afterSearch:function(){this.reset(),this.searchHandle=!0,this.distance=25,this.getStore()},focusList:function(e,t){var i,o,s,n;0<$(".navigation").length&&(i=$("#repairMap").find(".dealer-list"),s=(o=$("#repairCenterResult")).find(".list"),n=Math.floor(e/3),$(".navigation").is(".mobile-device")?0<=e&&e<3?o.slick("slickGoTo",0,!0):o.slick("slickGoTo",n,!0):(e=s.find('[data-item="'+e+'"]'),i.mCustomScrollbar("scrollTo",e)))},onItem:function(e){var t=this;$("div.list","#repairCenterResult").removeClass("active").filter("div.list[data-item='"+e+"']").addClass("active"),void 0!==t.infoBox&&(void 0===e||"undefined"==e?(t.infoBox.close(),t.activeItem=null):t.activeItem!=e?(t.infoBox.close(),t.activeItem=e,768<=$(window).width()?ISRTL?t.offsetCenter(t.markers[e].getPosition(),-220,-100,t.map):t.offsetCenter(t.markers[e].getPosition(),220,-100,t.map):t.offsetCenter(t.markers[e].getPosition(),0,-100,t.map),t.setStoreInfo(t.stores,t.infoBox,e),t.infoBox.open(t.map,t.markers[e])):t.activeItem!=e||t.infoBox.getVisible()||(t.infoBox.Content(null),ISRTL?t.offsetCenter(t.markers[e].getPosition(),-220,-100,t.map):t.offsetCenter(t.markers[e].getPosition(),220,-100,t.map),t.setStoreInfo(t.stores,t.infoBox,e),t.infoBox.open(t.map,t.markers[e])))},setRestrictionByGeocode:function(e){var o=this;o.geocoder.geocode({location:e},function(e,t){if(t==google.maps.GeocoderStatus.OK){o.results=e[0].address_components;for(var i=o.results.length-1;-1<i;i--)if(o.address=o.results[i],"postal_code"==o.address.types[0]){o.zipcode=o.address.long_name;break}}})},clearMarker:function(e){for(var t=0;t<this.markers.length;t++)this.markers[t].setMap(null);this.markers=[]},setRepairList:function(e,t){var i="";if("string"!=typeof(e=e[t]).address&&(e.address=""),"string"!=typeof e.dealerPhoneNo&&(e.dealerPhoneNo=""),"string"!=typeof e.dealerEmail&&(e.dealerEmail=""),"string"!=typeof e.dealerUrl&&(e.dealerUrl=""),"string"!=typeof e.dealerTime&&(e.dealerTime=""),"string"!=typeof e.dealerFaxNo&&(e.dealerFaxNo=""),"string"!=typeof e.dealerDesc&&(e.dealerDesc=""),"string"!=typeof e.zipCode&&(e.zipCode=""),i+='<div class="list" data-item="'+t+'">',i+='<div class="dealer-wrap">',i+='<span class="number">'+(t+1)+"</span>",(e.useSale||e.useInstall||e.useServices)&&(i+='<div class="icons">'),e.useSale&&(i+='<span class="icon-sales">sales</span>'),e.useInstall&&(i+='<span class="icon-install">install</span>'),e.useServices&&(i+='<span class="icon-service">service</span>'),(e.useSale||e.useInstall||e.useServices)&&(i+="</div>"),i+='<div class="dealer-name"><a href="#" data-item="'+t+'">'+e.dealerName+"</a></div>",""!=e.address&&(i+='<div class="dealer-address">'+e.address+"</div>"),""!=e.zipCode&&(i+='<div class="zipcode">'+e.zipCode+"</div>"),""!=e.dealerPhoneNo&&" "!=e.dealerPhoneNo)if(0<e.dealerPhoneNo.indexOf("|")){var o=e.dealerPhoneNo.split("|");i+='<div class="dealer-phonenumber">';for(var s=0;s<o.length;s++)i+='<a href="tel:'+o[s]+'">'+o[s]+"</a><br />";i+="</div>"}else i+='<div class="dealer-phonenumber"><a href="tel:'+e.dealerPhoneNo+'">'+e.dealerPhoneNo+"</a></div>";""!=e.dealerFaxNo&&(i+='<div class="dealer-fax">'+e.dealerFaxNo+"</div>"),""!=e.dealerEmail&&(i+='<div class="dealer-email"><a href="mailto:'+e.dealerEmail+'">'+e.dealerEmail+"</a></div>"),""!=e.dealerUrl&&(i+='<div class="dealer-url"><a href="'+e.dealerUrl+'" target="_blank">'+e.dealerUrl+"</a></div>"),""!=e.dealerDesc&&(i+='<div class="dealer-desc">'+e.dealerDesc+"</div>"),""!=e.dealerTime&&(i+='<div class="dealer-time">'+e.dealerTime.replace(/&lt;/gi,"<").replace(/&gt;/gi,">")+"</div>"),i+="</div>",i+='<div class="button-wrap">',i+='<a href="#none" class="btn btn-outline-secondary see">'+this.options.txtViewOnMap+"</a>",i+="</div>",i+="</div>",this.$repairStoreList.append(i)},setErrorList:function(){""!=this.$searchInput.val()&&(d.$repairStoreList.parent().find(".no-items").addClass("active"),setTimeout(function(){d.$repairSection.addClass("active")},200))},distanceHandler:function(e){$(e.target);this.afterControl&&(this.distance=25,this.getStore(!0),e.preventDefault())},reset:function(){var e=this;e.clearMarker(),e.onItem(),e.activeItem=null,void 0!==e.infoBox&&e.infoBox.close(),e.infoBox.setContent(null),e.directionsDisplay.setMap(null),e.directionsDisplay.setPanel(null),e.$repairStoreList.html(""),e.$repairSection.addClass("active"),e.$repairStoreList.parent().find(".no-items").removeClass("active"),e.$repairStoreList.parent().find(".btn-area").removeClass("active"),(e.$repairStoreList.hasClass("slick-slider")||e.$repairStoreList.hasClass("slick-initialized"))&&(e.$repairStoreList.slick("unslick"),e.$repairStoreList.removeClass("slick-slider").removeClass("slick-initialized"))},resizing:function(){var e=this;e.center=e.map.getCenter(),google.maps.event.trigger(e.map,"resize"),e.map.setCenter(e.center)},mapExpand:function(e){var t=this,i=t.$repairMapArea.height();window.innerHeight;t.zoom=t.map.getZoom(),e.preventDefault(),180==i?t.$repairMapArea.stop().animate({height:"100%"},300,function(){$(e.target).addClass("on"),t.$repairMapArea.parent().addClass("full"),t.resizing()}):t.$repairMapArea.stop().animate({height:180},300,function(){$(e.target).removeClass("on"),t.$repairMapArea.parent().removeClass("full"),t.resizing()})},slickEvent:function(e){this.$repairStoreList.parent().find(".no-items").removeClass("active"),setTimeout(function(){e.on("init reInit afterChange",function(e,t,i,o){i=(i||0)+1;$(".GPC0020 .total-page").text(t.slideCount),$(".GPC0020 .current-page").text(i)}),e.slick({adaptiveHeight:!0,rows:3,slidesPerRow:1,infinite:!1,dots:!1,speed:500,prevArrow:".pagination .prev",nextArrow:".pagination .next"}).next(".btn-area").addClass("active")},1e3)}};d._init()},null!=e&&(i=!1,$(window).scroll(function(){var e=$(".GPC0020").eq(0).offset().top,t=e+$(".GPC0020").eq(0).height();isInScreen(e,t)&&(i||(i=!0,(e=document.createElement("script")).type="text/javascript",t=document.documentElement.lang,"tw"==COUNTRY_CODE.toLowerCase()&&(t="zh-TW"),e.src="//maps.googleapis.com/maps/api/js?v=3.39&libraries=places&client=gme%2Dlgelectronicsinc1&callback=initialize&region=KR&language="+t,document.body.appendChild(e)))}).scroll());var t=$(".find-service-center.detail .collapse-detail a"),e=function(e){e.matches||t.hasClass("collapsed")&&t.trigger("click")};mql.maxSm.addListener(e),e(mql.maxSm)});
//# sourceMappingURL=maps/GPC0020.min.js.map
